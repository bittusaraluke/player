var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var a=0;return function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.makeIterator=function(c){var a="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return a?a.call(c):$jscomp.arrayIterator(c)};
(function(c){var a=function(){};a.isEmpty=function(a){return 0==a.replace(/^\s+|\s+$/g,"").length};a.strip=function(a){return a.replace(/^\s+|\s+$/g,"")};a.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)};a.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)};a.isChrome=function(){return!!c.chrome&&(!!c.chrome.webstore||!!c.chrome.runtime)};a.isSafari=function(){return 0<Object.prototype.toString.call(c.HTMLElement).indexOf("Constructor")};
a.isIE=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var c=navigator.userAgent,q=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=q.exec(c)&&(a=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(c=navigator.userAgent,q=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=q.exec(c)&&(a=parseFloat(RegExp.$1)));return-1!=a?!0:!1};a.isIOS=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)};a.isAndroid=function(){return-1<navigator.userAgent.indexOf("Android")};a.hasDownloadSupport=
function(){return"download"in document.createElement("a")};a.qualifyURL=function(a){var c=document.createElement("a");c.href=a;return c.href};a.relativePath=function(a){return/^(?:[a-z]+:)?\/\//i.test(a)};a.closestNumber=function(a,c){return a.reduce(function(a,f){return Math.abs(f-c)<Math.abs(a-c)?f:a})};a.hasLocalStorage=function(){try{return"localStorage"in c&&null!==c.localStorage}catch(f){return!1}};a.volumeCanBeSet=function(){var a=document.createElement("audio");if(!a)return!1;a.volume=0;return 0==
a.volume?!0:!1};a.randomiseArray=function(a){var c=[],f=[],B;for(B=0;B<a;B++)c[B]=B;for(B=0;B<a;B++){var C=Math.round(Math.random()*(c.length-1));f[B]=c[C];c.splice(C,1)}return f};a.valueLimit=function(a,c,q){return a<c?c:a>q?q:a};a.sortArray=function(a,c){var f,R=a.length,C=[];for(f=0;f<R;f++)C[f]=a[c[f]];return C};a.sortNumericArray=function(a){a.sort(function(a,c){return a-c})};a.shuffleArray=function(a){for(var c=a.length-1;0<c;c--){var f=Math.floor(Math.random()*(c+1)),B=$jscomp.makeIterator([a[f],
a[c]]);a[c]=B.next().value;a[f]=B.next().value}return a};a.keysrt=function(a,c,q){var f=1;q&&(f=-1);return a.sort(function(a,q){var R=a[c],x=q[c];return f*(R<x?-1:R>x?1:0)})};a.keysrt2=function(a,c,q,B){var f=1;B&&(f=-1);return a.sort(function(a,R){var x=a[c][q],B=R[c][q];return f*(x<B?-1:x>B?1:0)})};a.parseXML=function(a){if(c.ActiveXObject&&c.GetObject){var f=new ActiveXObject("Microsoft.XMLDOM");f.loadXML(a);return f}if(c.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");throw Error("No XML parser available");
};a.formatTime=function(a){a=parseInt(a,10);var c=Math.floor(a/3600),f=Math.floor((a-3600*c)/60);a=a-3600*c-60*f;if(0<c)return 10>c&&(c="0"+c),10>f&&(f="0"+f),10>a&&(a="0"+a),c+":"+f+":"+a;10>f&&(f="0"+f);10>a&&(a="0"+a);return f+":"+a};a.formatTimeWithMiliseconds=function(a){var c=parseInt(a.split(":")[0]),f=parseInt(a.split(":")[1]),B=parseInt(a.split(":")[2]);a=parseInt(a.split(",")[1]||a.split(".")[1]);return Math.round(100*(3600*c+60*f+B+a/1E3))/100};a.toSeconds=function(a){a=a.split(/[\.:,]+/);
return Number(3600*+a[0]+60*+a[1]+ +a[2])};a.formatNumber=function(a){return 9>a?"0"+(a+1):a+1};a.nFormatter=function(a,c){var f=[{value:1E18,symbol:"E"},{value:1E15,symbol:"P"},{value:1E12,symbol:"T"},{value:1E9,symbol:"G"},{value:1E6,symbol:"M"},{value:1E3,symbol:"k"}],B=/\.0+$|(\.[0-9]*[1-9])0+$/,C;for(C=0;C<f.length;C++)if(a>=f[C].value)return(a/f[C].value).toFixed(c).replace(B,"$1")+f[C].symbol;return a.toFixed(c).replace(B,"$1")};a.hmsToSecondsOnly=function(a){a=a.split(":");for(var c=0,f=1;0<
a.length;)c+=f*parseInt(a.pop()),f*=60;return c};a.canPlayMp3=function(){var a=document.createElement("audio");return!(!a.canPlayType||!a.canPlayType("audio/mpeg;").replace(/no/,""))};a.canPlayWav=function(){var a=document.createElement("audio");return!(!a.canPlayType||!a.canPlayType("audio/wav;").replace(/no/,""))};a.canPlayAac=function(){var a=document.createElement("audio");return!(!a.canPlayType||!a.canPlayType("audio/aac;").replace(/no/,""))};a.canPlayOgg=function(){var a=document.createElement("audio");
return!(!a.canPlayType||!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""))};a.canPlayFlac=function(){var a=document.createElement("audio");return!(!a.canPlayType||!a.canPlayType("audio/flac;").replace(/no/,""))};a.hasCanvas=function(){return!!document.createElement("canvas")};a.getElementOffsetTop=function(a){a=a.getBoundingClientRect();var f=document.body,q=document.documentElement;return Math.round(a.bottom-100+(c.pageYOffset||q.scrollTop||f.scrollTop)-(q.clientTop||f.clientTop||0))};
a.getScrollTop=function(a){a=document.documentElement;return(c.pageYOffset||a.scrollTop)-(a.clientTop||0)};a.getEvents=function(){var a={};"ontouchstart"in c?(a.downEvent="touchstart mousedown",a.moveEvent="touchmove mousemove",a.upEvent="touchend mouseup"):c.PointerEvent?(a.downEvent="pointerdown",a.moveEvent="pointermove",a.upEvent="pointerup"):(a.downEvent="mousedown",a.moveEvent="mousemove",a.upEvent="mouseup");return a};a.getUrlParameter=function(a){var f={};c.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,
function(a,c,C){f[c]=C});return a?f[a]:f};c.HAPUtils=a})(window);
(function(c,a){c.HAPPlaylistManager=function(c){function f(){D=HAPUtils.randomiseArray(F);console.log(D)}var q=this,B=c.loop,C=c.random,F,ka=!1,x=-1,S,Y,T=!1,D=[],O=!1;this.setCounter=function(c,T){"undefined"===typeof T&&(T=!0);x=T?x+parseInt(c,10):parseInt(c,10);if(isNaN(x))alert("HAPPlaylistManager message: No active media, counter = "+x);else if(ka=!1,"playlist"==B||"single"==B){if(C)if(x>F-1){x=D[F-1];f();if(D[0]==x){var Ja=D.splice(0,1);D.push(Ja)}x=0}else 0>x&&(x=D[0],f(),D[F-1]==x&&(Ja=D.splice(F-
1,1),D.unshift(Ja)),x=F-1);else x>F-1?x=0:0>x&&(x=F-1);a(q).trigger("HAPPlaylistManager.COUNTER_READY",q.getCounter())}else"off"==B&&(x>F-1?(x=F-1,ka=!0):0>x&&(x=0,ka=!0),ka?a(q).trigger("HAPPlaylistManager.PLAYLIST_END"):a(q).trigger("HAPPlaylistManager.COUNTER_READY",q.getCounter()))};this.getCounter=function(){return C?O?x:D[x]:x};this.advanceHandler=function(c){O=!1;T?(T=!1,Y+c>F-1?(x=F-1,a(q).trigger("HAPPlaylistManager.COUNTER_READY",q.getCounter())):0>Y+c?(x=0,a(q).trigger("HAPPlaylistManager.COUNTER_READY",
q.getCounter())):q.setCounter(Y+c,!1)):q.setCounter(c)};this.processPlaylistRequest=function(a){O=!1;C&&(O=!0,S=a,T||(Y=x,T=!0));q.setCounter(a,!1)};this.setPlaylistItems=function(a,c){"undefined"===typeof c&&(c=!0);c&&(x=-1);F=a;C&&f()};this.reSetCounter=function(a){"undefined"===typeof a?x=-1:(a=parseInt(a,10),F?(a>F-1?a=F-1:0>a&&(a=0),x=a):x=-1)};this.setRandom=function(a){(C=a)&&f();if(C){var c=D.length;for(a=0;a<c;a++)if(D[a]==x){if(0==a)break;a=D.splice(a,1);D.unshift(parseInt(a,10));break}x=
0}else T?(x=S,T=!1):x=D[x]};this.setLooping=function(a){B=a};this.getPosition=function(a){return D.indexOf(a)}}})(window,jQuery);
(function(c,a){c.HAPPlaybackRateSlider=function(f){function R(a){if(!S){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();S=!0;F.on(Ea.moveEvent,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();
q(c);B(c)}}).on(Ea.upEvent,function(a){a:if(S){S=!1;F.off(Ea.moveEvent).off(Ea.upEvent);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();q(c);D.hide()}})}return!1}function q(a){Y?(a=Math.max(0,Math.min(1,(a.pageY-O.offset().top)/ea)),a=1-a):a=Math.max(0,Math.min(1,
(a.pageX-O.offset().left)/ea));C.setValue(a)}function B(a){var c=Y?a.pageY-O.offset().top:a.pageX-O.offset().left;0>c?c=0:c>ea&&(c=ea);c=Math.max(0,Math.min(1,c/ea));if(!HAPUtils.isNumber(c))return!1;Y&&(c=1-c);c=Ka+(Eb-Ka)*c;c=Math.round(10*c)/10;D.text(c);c=x[0].getBoundingClientRect();var f=Z[0].getBoundingClientRect();if(Y){var q=parseInt(f.left-c.left-D.outerWidth()/2+Z.outerWidth()/2);a=parseInt(a.pageY-ka.scrollTop()-c.top-D.outerHeight()-10);a<f.top-c.top-D.outerHeight()-10?a=f.top-c.top-
D.outerHeight()-10:a>f.top-c.top+Z.outerHeight()-D.outerHeight()&&(a=f.top-c.top+Z.outerHeight()-D.outerHeight())}else q=parseInt(a.pageX-ka.scrollLeft()-c.left-D.outerWidth()/2),a=parseInt(f.top-c.top-D.outerHeight()),q<f.left-c.left?q=f.left-c.left:q>f.left-c.left+Z.outerWidth()-D.outerWidth()&&(q=f.left-c.left+Z.outerWidth()-D.outerWidth());D.css({left:q+"px",top:a+"px"}).show()}var C=this,F=a(document),ka=a(c),x=f.wrapper,S,Y=f.isVertical,T=Y?"height":"width",D=f.tooltip,O=f.sliderBg,Ja=f.sliderLevel,
Z=f.seekbar,ea=Y?O.height():O.width(),Ea=HAPUtils.getEvents(),Ka=f.settings.playbackRateMin,Eb=f.settings.playbackRateMax;Z.on(Ea.downEvent,function(a){R(a);return!1});this.setValue=function(c){HAPUtils.isNumber(ea)||(ea=Y?O.height():O.width());Ja.css(T,c*ea+"px");c=Ka+(Eb-Ka)*c;c=Math.round(10*c)/10;a(C).trigger("HAPPlaybackRateSlider.RANGE_CHANGE",{value:c})};this.setVisual=function(a){a=(a-Ka)/(Eb-Ka);HAPUtils.isNumber(ea)||(ea=Y?O.height():O.width());Ja.css(T,a*ea+"px")};if(!HAPUtils.isMobile()){var La=
function(){Z.off(Ea.moveEvent,B).off("mouseout",La);F.off("mouseout",La);D.hide()};Z.on("mouseover",function(){S||(Z.on(Ea.moveEvent,B).on("mouseout",La),F.on("mouseout",La))})}}})(window,jQuery);
(function(c,a){c.HAPRangeSlider=function(f){function R(c){if(!C){if("touchstart"==c.type){if(c=c.originalEvent.touches,!(c&&0<c.length))return!1}else c.preventDefault();C=!0;B.on(F.moveEvent,function(c){a:{if("touchmove"==c.type){if(c.originalEvent.touches&&c.originalEvent.touches.length)var f=c.originalEvent.touches;else if(c.originalEvent.changedTouches&&c.originalEvent.changedTouches.length)f=c.originalEvent.changedTouches;else break a;if(1<f.length)break a;f=f[0]}else f=c;c.preventDefault();a(q).trigger("HAPRangeSlider.RANGE_CHANGE",
{point:f,elem:S,event:f})}}).on(F.upEvent,function(c){a:if(C){C=!1;B.off(F.moveEvent).off(F.upEvent);if("touchend"==c.type){if(c.originalEvent.touches&&c.originalEvent.touches.length)var f=c.originalEvent.touches;else if(c.originalEvent.changedTouches&&c.originalEvent.changedTouches.length)f=c.originalEvent.changedTouches;else break a;if(1<f.length)break a;f=f[0]}else f=c;c.preventDefault();a(q).trigger("HAPRangeSlider.RANGE_CHANGE",{point:f,elem:S})}})}return!1}var q=this,B=a(document);a(c);var C,
F=HAPUtils.getEvents(),ka=f.range_handle_a,x=f.range_handle_b,S;ka.on(F.downEvent,function(c){S=a(this).css("z-index",1);x.css("z-index",0);R(c);return!1});x.on(F.downEvent,function(c){S=a(this).css("z-index",1);ka.css("z-index",0);R(c);return!1});this.isDrag=function(){return C}}})(window,jQuery);var hapjq=jQuery;
(function(c){c.fn.hap=function(a){function f(){I=e.mp3;-1!=I.indexOf("ebsfm:")&&(I=atob(I.substr(6)));if(fd)aa&&(d=0,a.resumeTime?d=resumeTime:e.start&&(d=e.start),ba?y.loadVideoById({videoId:I,startSeconds:d,endSeconds:e.end,suggestedQuality:e.quality}):y.cueVideoById({videoId:I,startSeconds:d,endSeconds:e.end,suggestedQuality:e.quality}));else{if(0==ha.length){alert("Using Youtube requires player to have thumbnail image in player where Youtube player will be placed. Please use demo which has thumbnail in player! hap-player-thumb element");
return}db=c('<div class="hap-youtube-holder"/>').appendTo(ha);var b="ytplayer"+Math.floor(16777215*Math.random()),d="https:"==window.location.protocol?"https:":"http:",m=window.location.href.split("/");m=m[0]+"//"+m[2];var g="&origin="+m;d=d+"//www.youtube-nocookie.com/embed/"+I+"?enablejsapi=1&controls=0&rel=0&showinfo=0&playsinline=1&modestbranding=1&wmode=transparent&iv_load_policy=3&cc_load_policy=0";/^http/.test(m)&&(d+=g);a.resumeTime?(d+="&start="+a.resumeTime,delete a.resumeTime):e.start&&
(d+="&start="+e.start);e.end&&(d+="&end="+e.end);d=c("<iframe/>",{id:b,frameborder:0,src:d,width:"100%",height:"100%",webkitAllowFullScreen:!1,mozallowfullscreen:!1,allowFullScreen:!1,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}).addClass("hap-media");db.show().prepend(d);window.YT||(d=document.createElement("script"),d.src="https://www.youtube.com/iframe_api",m=document.getElementsByTagName("script")[0],m.parentNode.insertBefore(d,m));var r=setInterval(function(){window.YT&&
window.YT.Player&&(r&&clearInterval(r),y=new YT.Player(b,{events:{onReady:R,onStateChange:q,onError:B}}))},100);fd=!0}db.show()}function R(b){aa=!0;gd&&ba&&y.playVideo()}function q(b){db.is(":visible")&&-1!=b.data&&(0==b.data?eb&&za&&!la&&!Yb.isDrag()?(la=!0,y.seekTo(ma),y.playVideo()):Zb||(Zb=!0,Dc()):1==b.data?(Ec||(Zb=!1,y.setPlaybackRate(e.playbackRate),fb&&fb.setVisual(e.playbackRate),hd||(hd=c('<div class="hap-iframe-blocker"></div>').css("display","block").appendTo(db)),gd=ba=Ec=!0,a.hideYoutubeAfterStart&&
db.css("opacity",0)),eb&&za&&setTimeout(function(){clearTimeout(this);la=!1},1E3),Ta&&clearInterval(Ta),Ta=setInterval(id,jd),kd()):2==b.data&&ld())}function B(b){c(n).trigger("soundError",{instance:n,instanceName:a.instanceName,data:e,error:b})}function C(){navigator.mediaSession.metadata=new MediaMetadata({title:e.title,artist:e.artist||"",album:e.album||"",artwork:[{src:e.thumb||""}]})}function F(b){var a=k[0].getBoundingClientRect(),m=b[0].getBoundingClientRect();t.text(b.attr("data-tooltip"));
var c=parseInt(m.top-a.top-t.outerHeight());b=parseInt(m.left-a.left-t.outerWidth()/2+b.outerWidth()/2);b+t.outerWidth()>k.width()?b=k.width()-t.outerWidth():0>b&&(b=0);0>c+a.top&&(c=parseInt(m.top-a.top+t.outerHeight()+15));t.css({left:b+"px",top:c+"px"}).show()}function ka(b){if(u){if(!gb){if("touchstart"==b.type){if(b=b.originalEvent.touches,!(b&&0<b.length))return!1}else b.preventDefault();gb=!0;Ma.on(fa.moveEvent,function(b){a:{if("touchmove"==b.type){if(b.originalEvent.touches&&b.originalEvent.touches.length)var a=
b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)a=b.originalEvent.changedTouches;else break a;if(1<a.length)break a;a=a[0]}else a=b;b.preventDefault();x(a)}}).on(fa.upEvent,function(b){a:if(gb){gb=!1;Ma.off(fa.moveEvent).off(fa.upEvent);if("touchend"==b.type){if(b.originalEvent.touches&&b.originalEvent.touches.length)var a=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)a=b.originalEvent.changedTouches;
else break a;if(1<a.length)break a;a=a[0]}else a=b;b.preventDefault();x(a,!0);t.hide()}})}return!1}}function x(b,a){if(Fb)d=$b.setProgress(b);else{d=b.pageX-Gb.offset().left;0>d?d=0:d>M&&(d=M);var d=Math.max(0,Math.min(1,d/M))}if(a){if("youtube"==h)y&&aa&&y.seekTo(d*y.getDuration());else if("audio"==h&&p&&!isNaN(p.duration)){var c=p.duration;var r=d*c;r>c-2&&(r=c-2);try{p.currentTime=r}catch(na){console.log(na)}}Hb||oa.width(d*M)}else oa.width(d*M)}function S(b){if(Fb)a=$b.trackTooltip(b),c=k[0].getBoundingClientRect(),
g=Aa[0].getBoundingClientRect(),r=parseInt(g.top-c.top-t.outerHeight()-20),b=parseInt(g.left-c.left-t.outerWidth()/2+Aa.outerWidth()/2),b+t.outerWidth()>k.width()?b=k.width()-t.outerWidth():0>b&&(b=0),0>r+c.top&&(r=parseInt(g.top-c.top+t.outerHeight()+20));else{a=b.pageX-Gb.offset().left;if(!HAPUtils.isNumber(a))return!1;0>a?a=0:a>M&&(a=M);var a=Math.max(0,Math.min(1,a/M)),c=k[0].getBoundingClientRect(),g=Aa[0].getBoundingClientRect();b=parseInt(b.pageX-ac.scrollLeft()-c.left-t.outerWidth()/2);var r=
parseInt(g.top-c.top-t.outerHeight(),10)-10;b<g.left-c.left?b=g.left-c.left:b>g.left-c.left+Aa.outerWidth()-t.outerWidth()&&(b=g.left-c.left+Aa.outerWidth()-t.outerWidth());0>r+c.top&&(r=parseInt(g.top-c.top+t.outerHeight()+15))}t.css({left:b+"px",top:r+"px"});if(!HAPUtils.isNumber(a))return!1;if("youtube"==h){if(y&&aa){var na=y.getDuration();r=a*na}}else"audio"==h&&p&&(na=p.duration,r=a*na);HAPUtils.isNumber(na)&&HAPUtils.isNumber(na)&&t.html(HAPUtils.formatTime(r)+" / "+HAPUtils.formatTime(na)).show()}
function Y(b){if(u){if(!Ib){if("touchstart"==b.type){if(b=b.originalEvent.touches,!(b&&0<b.length))return!1}else b.preventDefault();Ib=!0;Ma.on(fa.moveEvent,function(b){a:{if("touchmove"==b.type){if(b.originalEvent.touches&&b.originalEvent.touches.length)var a=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)a=b.originalEvent.changedTouches;else break a;if(1<a.length)break a;a=a[0]}else a=b;b.preventDefault();D(a)}}).on(fa.upEvent,function(b){a:if(Ib){Ib=
!1;Ma.off(fa.moveEvent).off(fa.upEvent);if("touchend"==b.type){if(b.originalEvent.touches&&b.originalEvent.touches.length)var a=b.originalEvent.touches;else if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)a=b.originalEvent.changedTouches;else break a;if(1<a.length)break a;a=a[0]}else a=b;b.preventDefault();D(a);t.hide()}})}return!1}}function T(){if(!u)return!1;0<J?(Fc=J,J=0):J=Fc;O()}function D(b){hb?(J=Math.max(0,Math.min(1,(b.pageY-Ua.offset().top)/Va)),J=1-J):J=Math.max(0,
Math.min(1,(b.pageX-Ua.offset().left)/Va));O()}function O(b){"undefined"!==typeof b&&(J=b);"youtube"==h?y&&aa&&y.setVolume(100*J):p&&(p.volume=J,p.muted=0==J?!0:!1);b=hb?"height":"width";HAPUtils.isNumber(Va)||(Va=hb?Ua.height():Ua.width());Od.css(b,J*Va+"px");ob.children().hide();0==J?ob.find(".hap-btn-volume-off").show():0<J&&.5>J?ob.find(".hap-btn-volume-down").show():ob.find(".hap-btn-volume-up").show();c(n).trigger("volumeChange",{instance:n,instanceName:a.instanceName,volume:J})}function Ja(b){var a=
hb?b.pageY-Ua.offset().top:b.pageX-Ua.offset().left;0>a?a=0:a>Va&&(a=Va);a=Math.max(0,Math.min(1,a/Va));if(!HAPUtils.isNumber(a))return!1;hb&&(a=1-a);a=parseInt(100*a,10);t.text(a+" %");a=k[0].getBoundingClientRect();var c=pa[0].getBoundingClientRect();if(hb){var g=parseInt(c.left-a.left-t.outerWidth()/2+pa.outerWidth()/2);b=parseInt(b.pageY-ac.scrollTop()-a.top-t.outerHeight()-20);b<c.top-a.top-t.outerHeight()-10?b=c.top-a.top-t.outerHeight()-10:b>c.top-a.top+pa.outerHeight()-t.outerHeight()&&(b=
c.top-a.top+pa.outerHeight()-t.outerHeight())}else g=parseInt(b.pageX-ac.scrollLeft()-a.left-t.outerWidth()/2),b=parseInt(c.top-a.top-t.outerHeight())-15,g<c.left-a.left?g=c.left-a.left:g>c.left-a.left+pa.outerWidth()-t.outerWidth()&&(g=c.left-a.left+pa.outerWidth()-t.outerWidth());0>b+a.top&&(b=parseInt(c.top-a.top+t.outerHeight()+20));t.css({left:g+"px",top:b+"px"}).show()}function Z(b){b=Math.max(0,Math.min(1,b/M));if("youtube"==h)var a=y.getDuration();else"audio"==h&&(a=p.duration);return b*a}
function ea(b){if(!u||a.disableSongSkip||z&&z.isAdOn())return!1;b=c(b.currentTarget);ba=Gc=!0;Jb();Kb&&e.adMid&&!Lb&&z.forceAdMidAudio();if(ib){var d=b.closest(".hap-accordion-item").attr("data-id");if(d!=Mb){Mb=d;G=Nb[Mb].data;v=G.length;for(d=0;d<v;d++)G[d].id=d;E.setPlaylistItems(v)}}b=b.closest(".hap-playlist-item").attr("data-id");E.processPlaylistRequest(b);-1<P.indexOf("hap-art-narrow-light")&&n.togglePlaylist();c(n).trigger("clickPlaylistItem",{instance:n,instanceName:a.instanceName})}function Ea(b){b.preventDefault();
if(!u)return!1;c(b.currentTarget).closest(".hap-playlist-item").addClass("hap-playlist-item-selected");c(n).trigger("overPlaylistItem",{instance:n,instanceName:a.instanceName})}function Ka(b){b.preventDefault();if(!u)return!1;b=c(b.currentTarget).closest(".hap-playlist-item");b.hasClass("hap-playlist-item-disabled")||b.removeClass("hap-playlist-item-selected");c(n).trigger("outPlaylistItem",{instance:n,instanceName:a.instanceName})}function Eb(b){if(!u)return!1;b=c(b.currentTarget);if(b.hasClass("hap-playlist-toggle")||
b.hasClass("hap-playlist-close"))n.togglePlaylist();else if(b.hasClass("hap-skip-backward"))b=b.attr("data-skip-time")?parseInt(b.attr("data-skip-time"),10):seekTime,n.seekBackward(b);else if(b.hasClass("hap-skip-forward"))b=b.attr("data-skip-time")?parseInt(b.attr("data-skip-time"),10):seekTime,n.seekForward(b);else if(b.hasClass("hap-prev-toggle")){Kb&&e.adMid&&!Lb&&z.forceAdMidAudio();if(a.disableSongSkip||z&&z.isAdOn())return!1;n.previousMedia()}else if(b.hasClass("hap-playback-toggle"))Kb&&e.adMid&&
!Lb&&z.forceAdMidAudio(),n.togglePlayback();else if(b.hasClass("hap-next-toggle")){Kb&&e.adMid&&!Lb&&z.forceAdMidAudio();if(a.disableSongSkip||z&&z.isAdOn())return!1;n.nextMedia()}else if(b.hasClass("hap-range-toggle"))n.toggleRange();else if(b.hasClass("hap-playback-rate-toggle")||b.hasClass("hap-playback-rate-close"))Hc.hide(),Ic.toggle(),t.hide(),Ic.is(":visible")?bc.addClass("hap-contr-btn-hover"):bc.removeClass("hap-contr-btn-hover"),cc.removeClass("hap-contr-btn-hover");else if(b.hasClass("hap-loop-toggle"))jb.find(".hap-btn").hide(),
kb++,kb>Ob.length-1&&(kb=0),a.loopState=Ob[kb],jb.find(".hap-btn-loop-"+a.loopState).show(),E.setLooping(a.loopState),F(jb.find(".hap-btn:visible"));else if(b.hasClass("hap-random-toggle"))a.randomPlay=!a.randomPlay,E.setRandom(a.randomPlay),Fa.find(".hap-btn").hide(),a.randomPlay?Fa.find(".hap-btn-random-on").show():Fa.find(".hap-btn-random-off").show(),F(Fa.find(".hap-btn:visible"));else if(b.hasClass("hap-sort-alpha"))HAPUtils.isEmpty(qa)?qa="title-asc":"title-asc"==qa?qa="title-desc":"title-desc"==
qa&&(qa="title-asc"),n.sort(qa),F(Na.find(".hap-btn:visible"));else if(b.hasClass("hap-popup-toggle")){if(a.isPopup)return!1;hapOpenPopup(a,n)}else if(b.hasClass("hap-volume-toggle"))(0==pa.length||!lb&&b.hasClass("hap-volume-toggable"))&&T();else if(b.hasClass("hap-share-toggle")||b.hasClass("hap-share-close"))Hc.toggle(),Ic.hide(),t.hide(),bc.removeClass("hap-contr-btn-hover"),Hc.is(":visible")?cc.addClass("hap-contr-btn-hover"):cc.removeClass("hap-contr-btn-hover");else if(b.hasClass("hap-share-item")){if(!h)return!1;
"undefined"===typeof HAPShareManager&&alert("link to sharemanager.js file missing in head tag!");md.share(b.attr("data-type").toLowerCase(),e,n.getCurrentMediaUrl())}}function La(){V&&(c(n).trigger("playlistItemEnabled",{instance:n,instanceName:a.instanceName,item:V}),V.removeClass("hap-playlist-item-selected hap-playlist-item-disabled"),V=null)}function Ld(b){V&&La();V=w.children(".hap-playlist-item").eq(b);if(V.length){V.addClass("hap-playlist-item-selected hap-playlist-item-disabled");if(a.usePlaylistScroll&&
0<v){if(!Gc)if("undefined"!==typeof mCustomScrollbar)setTimeout(function(){"horizontal"==a.playlistScrollOrientation?Oa.mCustomScrollbar("scrollTo",parseInt(V.position().left),{scrollInertia:500}):Oa.mCustomScrollbar("scrollTo",parseInt(V.position().top),{scrollInertia:500})},1E3);else var d=setInterval(function(){"undefined"!==typeof mCustomScrollbar&&(clearInterval(d),"horizontal"==a.playlistScrollOrientation?Oa.mCustomScrollbar("scrollTo",parseInt(V.position().left),{scrollInertia:500}):Oa.mCustomScrollbar("scrollTo",
parseInt(V.position().top),{scrollInertia:500}))},500);Gc=!1}c(n).trigger("playlistItemDisabled",{instance:n,instanceName:a.instanceName,item:V})}}function ed(b){Q=!0;ra.show();Wa&&dc();var d=Jc.length?Jc.find(b):c(b);if(0==d.length)return alert("Failed playlist selection! Playlist - "+b+" does not exist. Check activePlaylist option in settings!"),Q=!1,ra.hide(),!1;a.activePlaylist=b;c(n).trigger("playlistStartLoad",{instance:n,instanceName:a.instanceName});d.find(".hap-playlist-options").length&&
(d.find(".hap-playlist-options").clone().prependTo(w),void 0!=d.find(".hap-playlist-options").attr("data-media-prefix-url")&&(Ba=d.find(".hap-playlist-options").attr("data-media-prefix-url")));void 0!=d.attr("data-playlist-id")&&(a.playlistId=d.attr("data-playlist-id"));d.children(".hap-playlist-item").each(function(){N.push(nd(c(this)))});v=N.length;K()}function Md(b){console.log(b);c.ajax({type:"GET",url:b.path,dataType:"html"}).done(function(a){var d={};c(a).children(".hap-playlist-item").each(function(){d=
nd(c(this));b.origtype&&(d.origtype=b.origtype);void 0!=b.mediaId&&(d.mediaId=b.mediaId);N.push(d)});v=N.length;K()}).fail(function(b,a,c){console.log("Error processXml: "+b,a,c);K()})}function Nd(b){if("file:"==window.location.protocol)return console.log("Reading m3u files requires server connection."),!1;c.ajax({type:"GET",url:b.path}).done(function(a){var d,g;a.replace("#EXTM3U","").split("#EXTINF:").slice(1).map(function(a,m){d=c.extend(!0,{},b);d.type="audio";g=a.split("\n").slice(0,-1);d.mp3=
c.trim(g[1]);var r=g[0].split(",");if(1<r.length){var na=r[0];HAPUtils.isNumber(na)&&-1!=na&&(d.duration=na);r=r[1]}else r=r[0];-1<r.indexOf("-")?(r=r.split("-"),d.title=c.trim(r[1]),r[0].match(/^\d+(\s*)+\./)?(r=r[0].substr(r[0].indexOf(".")+1),d.artist=c.trim(r[1])):d.artist=c.trim(r[0])):d.title=c.trim(r);H.push(d)});K()}).fail(function(b,a,c){console.log("Error process m3u: "+b,a,c);K()})}function Pd(b){c.ajax({type:"GET",url:b.path,dataType:"json"}).done(function(a){Xa=-1;H=[];N=[];Ya=!1;Wa||
(Ya=!0);Wa=w;Array.isArray(a)?N=a:N.push(a);if(b.origtype&&void 0!=b.mediaId){var d=N.length;for(a=0;a<d;a++)N[a].origtype=b.origtype,N[a].mediaId=b.mediaId}v=N.length;K()}).fail(function(b,a,c){console.log("Error processJson: "+b,a,c);K()})}function K(){Xa++;if(Xa>v-1)Ga();else{var b=N[Xa],a=b.type;if("soundcloud"==a)if(ca="soundcloud",b.limit?(U=b.limit,b.loadMore&&(ia=!0)):(U=999999999,ia=!1),sa=[],window.SC)pb(!0,b.path);else{od();var c=setInterval(function(){Kc&&(c&&clearInterval(c),pb(!0,b.path))},
100)}else"podcast"==a?(ca="podcast",pd(b)):"itunes_podcast_music"==a?Qd(b):"folder"==a?(ca="folder",Rd(b)):"folder_accordion"==a?(ib=!0,Sd(b)):"json_accordion"==a?(ib=!0,Td(b)):"gdrive_folder"==a?Ud(b):"hls"==a?(H.push(b),K()):"audio"==a?(H.push(b),K()):"shoutcast"==a||"icecast"==a||"radiojar"==a?(H.push(b),K()):"youtube_single"==a||"youtube_playlist"==a?(ca="youtube",b.loadMore&&(ia=!0),Za||Lc("youtube"),Za.setData(b)):"xml"==a?Md(b):"json"==a?Pd(b):"m3u"==a&&Nd(b)}}function nd(b){var d={};d.type=
d.origtype=b.attr("data-type");d.origclasses=b.attr("class");b.is(":empty")||(d.content=b.html());void 0!=b.attr("data-media-id")&&(d.mediaId=parseInt(b.attr("data-media-id"),10));void 0!=b.attr("data-mp3")&&(d.mp3=b.attr("data-mp3"));void 0!=b.attr("data-wav")&&(d.wav=b.attr("data-wav"));void 0!=b.attr("data-aac")&&(d.aac=b.attr("data-aac"));void 0!=b.attr("data-flac")&&(d.flac=b.attr("data-flac"));void 0!=b.attr("data-path")&&(d.path=b.attr("data-path"),-1!=d.path.indexOf("ebsfm:")&&(d.path=atob(d.path.substr(6))));
void 0!=b.attr("data-mountpoint")&&(d.mountpoint=b.attr("data-mountpoint"));void 0!=b.attr("data-version")&&(d.version=b.attr("data-version"));void 0!=b.attr("data-sid")&&(d.sid=b.attr("data-sid"));void 0!=b.attr("data-limit")&&(d.limit=Math.abs(parseInt(b.attr("data-limit"),10)));void 0!=b.attr("data-thumb")&&(d.thumb=b.attr("data-thumb"));void 0!=b.attr("data-thumb-default")&&(d.thumbDefault=b.attr("data-thumb-default"));void 0!=b.attr("data-alt")&&(d.alt=b.attr("data-alt"));void 0!=b.attr("data-title")&&
(d.title=b.attr("data-title"));void 0!=b.attr("data-description")&&(d.description=b.attr("data-description"));void 0!=b.attr("data-artist")&&(d.artist=b.attr("data-artist"));void 0!=b.attr("data-album")&&(d.album=b.attr("data-album"));void 0!=b.attr("data-download")&&(d.download=b.attr("data-download"));void 0!=b.attr("data-duration")&&(d.duration=b.attr("data-duration"));void 0!=b.attr("data-date")&&(d.date=b.attr("data-date"));void 0!=b.attr("data-id3")&&(d.id3=!0);void 0!=b.attr("data-start")&&
(d.start=Math.abs(b.attr("data-start")));void 0!=b.attr("data-end")&&(d.end=Math.abs(b.attr("data-end")));d.playbackRate=1;if(void 0!=b.attr("data-playback-rate")&&!HAPUtils.isEmpty(b.attr("data-playback-rate"))){var c=Number(b.attr("data-playback-rate"));d.playbackRate=HAPUtils.valueLimit(c,a.playbackRateMin,a.playbackRateMax)}void 0!=b.attr("data-link")&&(d.link=b.attr("data-link"),d.target="_blank",void 0!=b.attr("data-target")&&(d.target=b.attr("data-target")));void 0!=b.attr("data-share")&&(d.share=
b.attr("data-share"));void 0!=b.attr("data-sort")&&(d.sort=b.attr("data-sort"));void 0!=b.attr("data-active-accordion")&&(d.activeAccordion=b.attr("data-active-accordion"));b.html().length&&(d.customContent=b.html());void 0!=b.attr("data-load-more")&&(ia=!0);void 0!=b.attr("data-use-gd-api")&&(d.useGdApi=!0);void 0!=b.attr("data-ad-pre")&&(d.adPre=b.attr("data-ad-pre").split(",").map(function(b){return b.trim()}),void 0!=b.attr("data-shuffle-ads")&&1<d.adPre.length&&HAPUtils.shuffleArray(d.adPre));
void 0!=b.attr("data-ad-mid")&&(d.adMid=b.attr("data-ad-mid").split(",").map(function(b){return b.trim()}),void 0!=b.attr("data-shuffle-ads")&&1<d.adMid.length&&HAPUtils.shuffleArray(d.adMid),void 0!=b.attr("data-ad-mid-interval")&&(d.adMidInterval=b.attr("data-ad-mid-interval")));void 0!=b.attr("data-ad-end")&&(d.adEnd=b.attr("data-ad-end").split(",").map(function(b){return b.trim()}),void 0!=b.attr("data-shuffle-ads")&&1<d.adEnd.length&&HAPUtils.shuffleArray(d.adEnd));return d}function Lc(b){"youtube"==
b&&(Za=new HAPYoutubeLoader(a),c(Za).on("HAPYoutubeLoader.END_LOAD",function(b,a){var d,c=a.data.length;for(d=0;d<c;d++){var m=a.data[d];H.push(m)}L=a.nextPageToken;ta?Ga():K()}))}function Rd(b){if("file:"==window.location.protocol)return console.log("Reading folders requires server connection."),!1;b.limit?(U=b.limit,b.loadMore&&(ia=!0)):U=999999999;var d=b.path.replace(/\/\//g,"/"),m=a.sourcePath+"includes/folder_parser.php";d={dir:d};var g=U;L=[];b.id3?(Pa=W=H.length-1,Mc=!0):Mc=!1;c.ajax({type:"GET",
url:m,data:d,dataType:"json"}).done(function(d){var m,r=d.length;b.sort&&("filename-asc"==b.sort?HAPUtils.keysrt(d,"filename"):"filename-desc"==b.sort?HAPUtils.keysrt(d,"filename",!0):"date-asc"==b.sort?HAPUtils.keysrt(d,"filemtime"):"date-desc"==b.sort&&HAPUtils.keysrt(d,"filemtime",!0));for(m=0;m<r;m++){var e=d[m];var l=c.extend(!0,{},b);l.type="audio";var f=e.fullpath;l[e.extension]=f;a.createDownloadIconsInPlaylist&&!l.download&&(l.download=f);a.createLinkIconsInPlaylist&&!l.link&&(l.link=f);
l.title||(l.title=e.filename);m<g?(H.push(l),W++):L.push(l)}0==L.length&&(ia=!1,L=null);b.id3?("undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),ec()):K()}).fail(function(b,a,d){console.log("Error processFolder: "+b.responseText,a,d);K()})}function Sd(b){if("file:"==window.location.protocol)return console.log("Reading folders requires server connection."),!1;var d=b.path.replace(/\/\//g,"/");c.ajax({type:"GET",url:a.sourcePath+"includes/folder_accordion.php",
data:{dir:d},dataType:"json"}).done(function(d){var c,m=d.length,e;for(c=0;c<m;c++){var f=d[c].children;Nb.push({media:f});var k=f.length;for(e=0;e<k;e++){var l=f[e];var h={type:"audio"};void 0!=b.mediaId&&(h.mediaId=b.mediaId);var n=l.fullpath;h[l.extension]=n;a.createDownloadIconsInPlaylist&&!h.download&&(h.download=n);a.createLinkIconsInPlaylist&&!h.link&&(h.link=n);h.title||(h.title=l.filename);f[e]=h}}qd(d,b);da||(da=0);Mb=da;w=fc=w.find('.hap-accordion-item[data-id="'+da+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content");
H=d[da].children;b.id3?(Nc=!0,"undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Pa=-1,W=H.length-1,Pb()):Ga()}).fail(function(b,a,d){console.log("Error processFolderAccordion: "+b,a,d);K()})}function Td(b){if("file:"==window.location.protocol)return console.log("Reading json requires server connection."),!1;c.ajax({type:"GET",url:b.path,dataType:"json"}).done(function(d){var c,g=d.length,r;for(c=0;c<g;c++){var e=d[c].children;Nb.push({media:e});b.sort&&("filename-asc"==
b.sort?HAPUtils.keysrt(e,"filename"):"filename-desc"==b.sort?HAPUtils.keysrt(e,"filename",!0):"date-asc"==b.sort?HAPUtils.keysrt(e,"filemtime"):"date-desc"==b.sort&&HAPUtils.keysrt(e,"filemtime",!0));var f=e.length;for(r=0;r<f;r++){var h=e[r];var l={type:"audio"};void 0!=b.mediaId&&(l.mediaId=b.mediaId);h=Ba?Ba+"/"+d[c].parent+"/"+h:h;l.mp3=h;a.createDownloadIconsInPlaylist&&!l.download&&(l.download=h);a.createLinkIconsInPlaylist&&!l.link&&(l.link=h);e[r]=l}}qd(d,b);da||(da=0);Mb=da;w=fc=w.find('.hap-accordion-item[data-id="'+
da+'"]').addClass("hap-accordion-item-inited hap-accordion-item-opened").find(".hap-accordion-item-content");H=d[da].children;b.id3?(Nc=!0,"undefined"===typeof jsmediatags&&console.log("Link to jsmediatags.js missing in head tag!"),Pa=-1,W=H.length-1,Pb()):Ga()}).fail(function(b,a,c){console.log("Error processJsonAccordion: "+b,a,c);K()})}function Ud(b){if("file:"==window.location.protocol)return console.log("Reading files from folders locally is not possible! This requires server connection."),!1;
if(HAPUtils.isEmpty(a.gDriveAppId))return console.log("gDriveAppId has not been set in settings!"),!1;c.ajax({url:"https://www.googleapis.com/drive/v3/files?q='"+b.path+"'+in+parents&pageSize=1000&key="+a.gDriveAppId,dataType:"jsonp"}).done(function(d){var m,g=d.files.length,r=[],e=[];for(m=0;m<g;m++){var f=d.files[m];/mp3|mpeg|mpeg3|wav|aac|adts/.test(f.mimeType)?e.push(f):/jpg|jpeg|png/.test(f.mimeType)&&r.push(f)}b.sort&&("filename-asc"==b.sort?(HAPUtils.keysrt(e,"name"),HAPUtils.keysrt(r,"name")):
"filename-desc"==b.sort&&(HAPUtils.keysrt(e,"name",!0),HAPUtils.keysrt(r,"name",!0)));g=e.length;for(m=0;m<g;m++){f=e[m];d=c.extend(!0,{},b);d.type="audio";var h=f.name.substr(f.name.lastIndexOf(".")+1);b.useGdApi?(d[h.toLowerCase()]="https://www.googleapis.com/drive/v3/files/"+f.id+"?alt=media&key="+a.gDriveAppId,a.createDownloadIconsInPlaylist&&!d.download&&(d.download="https://www.googleapis.com/drive/v3/files/"+f.id+"?alt=media&key="+a.gDriveAppId)):(d[h.toLowerCase()]="https://drive.google.com/uc?export=view&id="+
f.id,a.createDownloadIconsInPlaylist&&!d.download&&(d.download="https://drive.google.com/uc?export=download&id="+f.id));a.createLinkIconsInPlaylist&&!d.link&&(d.link="https://drive.google.com/open?id="+f.id);!d.thumb&&r[m]&&(d.thumb="https://drive.google.com/uc?export=view&id="+r[m].id);d.title||(d.title=f.name.substr(0,f.name.lastIndexOf(".")));H.push(d)}K()}).fail(function(b,a,c){console.log("Error processGdriveFolder: "+b,a,c);K()})}function rd(){if(!L)return!1;Q=!0;ra.show();H=L.splice(0,U);0==
L.length&&(L=null);Mc?(Pa=-1,W=H.length-1,ec()):Ga()}function ec(){var b=H[W];jsmediatags.read(b.mp3||b.wav||b.aac,{onSuccess:function(a){a=a.tags;var d=a.picture;a.artist&&(b.artist=a.artist);a.title&&(b.title=a.title);a.album&&(b.album=a.album);if(d){var c="",r,e=d.data.length;for(r=0;r<e;r++)c+=String.fromCharCode(d.data[r]);b.thumb="data:"+d.format+";base64,"+window.btoa(c);b.thumbIsBase64=!0}a.TLEN&&(b.duration=a.TLEN.data/1E3);W--;W>Pa?ec():ta?Ga():K()},onError:function(a){console.log("ID3 error: ",
a.type,a.info);W--;W>Pa?ec():K()}})}function Pb(){var a=H[W];jsmediatags.read(a.mp3||a.wav||a.aac,{onSuccess:function(b){b=b.tags;var c=b.picture;console.log(b);b.artist&&(a.artist=b.artist);b.title&&(a.title=b.title);b.album&&(a.album=b.album);if(c){var d="",r,e=c.data.length;for(r=0;r<e;r++)d+=String.fromCharCode(c.data[r]);a.thumb="data:"+c.format+";base64,"+window.btoa(d);a.thumbIsBase64=!0}b.TLEN&&(a.duration=b.TLEN.data/1E3);W--;W>Pa?Pb():Ga()},onError:function(a){console.log("ID3 error: ",
a.type,a.info);W--;W>Pa?Pb():Ga()}})}function pd(b){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");else{b.limit?(U=b.limit,b.loadMore&&(ia=!0)):U=999999999;var d=Vd+"?url="+encodeURIComponent(b.path),m=U;L=[];c.ajax({url:d,dataType:"json",cache:!1}).done(function(d){d=d.contents.substr(d.contents.indexOf("<?xml"));var r=HAPUtils.parseXML(d),g,e,f,l=0;c(r).find("image").length&&c(r).find("image").attr("href")?f=c(r).find("image").attr("href"):c(d).find("itunes\\:image").length&&
c(d).find("itunes\\:image").attr("href")&&(f=c(d).find("itunes\\:image").attr("href"));f&&f.lastIndexOf("&size=Large")&&(f=f.replace("=Large","=Small"));c(r).find("item").each(function(){g=c(this);e=c.extend(!0,{},b);e.type="audio";e.mp3=g.find("enclosure").attr("url");!e.title&&g.find("title").length&&(e.title=g.find("title").text());e.artist||(g.find("author").length?e.artist=g.find("author").text():g.find("itunes\\:author").length&&(e.artist=g.find("itunes\\:author").text()));g.find("pubDate").length&&
(e.date=g.find("pubDate").text());if(!e.description&&g.find("description").length){var d=g.find("description").text(),r=document.createElement("div");r.innerHTML=d;e.description=r.textContent||r.innerText||""}e.duration||(g.find("itunes\\:duration").length?e.duration=g.find("itunes\\:duration").text():g.find("duration").length&&(e.duration=g.find("duration").text()));e.thumb||(g.find("image").length&&g.find("image").attr("href")?e.thumb=g.find("image").attr("href"):g.find("itunes\\:image").length&&
g.find("itunes\\:image").attr("href")?e.thumb=g.find("itunes\\:image").attr("href"):f&&(e.thumb=f));e.thumb.lastIndexOf("&size=Large")&&(e.thumb=e.thumb.replace("=Large","=Small"));a.createDownloadIconsInPlaylist&&!e.download&&(e.download=e.mp3);g.find("link").length&&!e.link&&a.createLinkIconsInPlaylist&&(e.link=g.find("link").text());l<m?H.push(e):L.push(e);l++});K()}).fail(function(a,b,c){console.log("Error processPodcast: "+a.responseText,b,c);K()})}}function Qd(a){if("file:"==window.location.protocol)console.log("Using Podcast requires server connection!");
else{var b=a.path.match(/id(\d+)/);(b=b?b[1]:url.match(/\d+/))?c.ajax({url:"https://itunes.apple.com/lookup",data:{id:parseInt(b),entity:"podcast"},type:"GET",dataType:"jsonp"}).done(function(b){a.path=b.results[0].feedUrl;pd(a)}).fail(function(a,b,c){console.log("Error processiTunes: "+a.responseText,b,c);K()}):(console.log("No Podcast ID found!"),K())}}function od(){if("file:"==window.location.protocol)console.log("Using SoundCloud requires server connection!");else{if(HAPUtils.isEmpty(a.soundCloudAppId))return console.log("soundCloudAppId has not been set in settings!"),
!1;var b=document.createElement("script");b.src="https://connect.soundcloud.com/sdk.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);var m=setInterval(function(){window.SC&&(m&&clearInterval(m),SC.initialize({client_id:a.soundCloudAppId}),Kc=!0)},100)}}function pb(b,d){SC.get(b?"https://api.soundcloud.com/resolve.json?url="+d+"&client_id="+a.soundCloudAppId:d,{limit:U,linked_partitioning:1},function(a,b){if(b){for(console.log("Error getSoundCloudPage: "+b);sa.length;)H.push(sa.splice(0,
1)[0]);K()}else{if("track"==a.kind)gc(a);else if("playlist"==a.kind){var m,g=a.tracks.length;if(sa.length+g>=U){g=U-sa.length;var e=!0}for(m=0;m<g;m++)gc(a.tracks[m])}else if(a.collection)for(g=a.collection.length,sa.length+g>=U&&(g=U-sa.length,e=!0),m=0;m<g;m++)gc(a.collection[m]);else{if(a.username){m=a.uri;m=/likes/.test(d)?m+"/likes":/favorites/.test(d)?m+"/favorites":m+"/tracks";pb(!1,m);return}if(c.isArray(a))for(g=a.length,sa.length+g>=U&&(g=U-sa.length,e=!0),m=0;m<g;m++)gc(a[m])}L=a.next_href?
a.next_href:null;if(a.next_href&&!e)pb(!1,a.next_href);else{for(;sa.length;)H.push(sa.splice(0,1)[0]);K()}}})}function sd(){if(!L)return!1;Q=!0;ra.show();H=[];H=L.splice(0,U);0==L.length&&(L=null);Ga()}function td(){if(!L)return!1;Q=!0;ra.show();Xa=0;N=[];v=1;if(window.SC)pb(!1,L);else{od();var a=setInterval(function(){Kc&&(a&&clearInterval(a),pb(!1,L))},100)}}function gc(b){if(b.streamable&&b.stream_url){var d=c.extend(!0,{},N[Xa]);d.type="audio";b.duration&&(d.duration=b.duration/1E3);d.mp3=b.stream_url+
"?client_id="+a.soundCloudAppId;a.createDownloadIconsInPlaylist&&!d.download&&b.downloadable&&b.download_url&&(d.download=d.mp3.replace(/\/stream\\?/,"/download"));!d.title&&b.title&&(d.title=b.title);!d.description&&b.description&&(d.description=b.description);!d.thumb&&b.artwork_url&&(d.thumb=b.artwork_url);b.created_at&&(d.date=b.created_at);d.favoritingsCount=parseInt(b.favoritings_count?b.favoritings_count:0,10);d.playbackCount=parseInt(b.playback_count?b.playback_count:0,10);d.hotness=d.favoritingsCount+
d.playbackCount;b.permalink_url&&a.createLinkIconsInPlaylist&&!d.link&&(d.link=b.permalink_url);sa.push(d)}}function Ga(){var b,d=$a?ja:G.length,m=H.length,g,e=0,f=[];for(b=0;b<m;b++){var h=null;var k=b+d;$a&&e++;var l=H[b];var n=l.type;if(a.usePlaylist){l.origclasses||(l.origclasses="hap-playlist-item");var p=c('<div class="'+l.origclasses+'"/>').attr("data-type",n);delete l.origclasses;if($a){u?u.after(p):qb?p.appendTo(w):w.children("div").eq(ja).before(p);var u=p}else p.appendTo(w);var t=c('<div class="hap-playlist-item-content"/>').appendTo(p);
if(-1!=Ha.indexOf("thumb")&&(g=l.thumb||l.thumbDefault)){"soundcloud"==l.origtype&&a.soundCloudThumbQualityInPlaylist&&(g=g.replace("large.jpg",a.soundCloudThumbQualityInPlaylist));!Ba||l.thumbIsBase64||HAPUtils.relativePath(g)||(g=Ba+g);var q=new Image;q.className="hap-thumbimg";q.src=g;g=l.alt?l.alt:l.title?l.title.replace(/"/g,"'"):"image";q.alt=g;c('<span class="hap-playlist-thumb"></span>').append(q).appendTo(t)}if(-1!=Ha.indexOf("title")&&l.title||-1!=Ha.indexOf("description")&&l.description)q=
c('<span class="hap-playlist-info">').appendTo(t),-1!=Ha.indexOf("title")&&l.title&&(g='<span class="hap-playlist-title-wrap">',a.useNumbersInPlaylist&&(g+='<span class="hap-playlist-title-num"></span>'),l.artist&&l.title?g="title"==Wd[0]?g+('<span class="hap-playlist-title">'+l.title+"</span>"+a.artistTitleSeparator+'<span class="hap-playlist-artist">'+l.artist+"</span>"):g+('<span class="hap-playlist-artist">'+l.artist+"</span>"+a.artistTitleSeparator+'<span class="hap-playlist-title">'+l.title+
"</span>"):l.title?g+='<span class="hap-playlist-title">'+l.title+"</span>":l.artist&&(g+='<span class="hap-playlist-artist">'+l.artist+"</span>"),g+="</span>",q.append(g)),-1!=Ha.indexOf("description")&&l.description&&(g=l.description,a.limitDescriptionText&&(g=g.substr(0,a.limitDescriptionText)+"..."),c('<span class="hap-playlist-description">'+g+"</span>").appendTo(q));if(-1!=Ha.indexOf("duration")&&l.duration||-1!=Ha.indexOf("date")&&l.date)q=c('<span class="hap-playlist-info2">').appendTo(t),
-1!=Ha.indexOf("duration")&&l.duration&&(g=isNaN(l.duration)?-1==l.duration.lastIndexOf(":")?HAPUtils.formatTime(l.duration):l.duration:HAPUtils.formatTime(l.duration),c('<span class="hap-playlist-duration">'+g+"</span>").appendTo(q)),-1!=Ha.indexOf("date")&&l.date&&(g=(new Date(l.date)).toDateString().slice(4,10),c('<span class="hap-playlist-date">'+g+"</span>").appendTo(q));void 0!=l.mediaId&&p.attr("data-media-id",l.mediaId);l.title&&(q=l.title.replace(/['"\|]/g,""),g=Qb(l,!0),p.attr({title:g,
"data-safe-title":q}),l.safeTitle=q);l.artist&&(q=l.artist.replace(/['"\|]/g,""),p.attr({"data-artist":l.artist,"data-safe-artist":q}),l.safeArtist=q);l.description&&p.attr("data-description",l.description);l.link&&p.attr("data-link",l.link);l.share&&p.attr("data-share",l.share);a.useStatistics&&hc.length?(h=c('<div class="hap-playlist-icons"></div>').appendTo(p),q=c('<div class="hap-stats"></div>'),h.prepend(q),-1!=hc.indexOf("plays")&&(g=c('<div class="hap-stat-icon hap-play-count" title="'+a.tooltipStatPlays+
'">'+a.statPlayIcon+"<span>0</span></div>"),q.append(g)),-1!=hc.indexOf("likes")&&(g=c('<div class="hap-stat-icon hap-like-count" title="'+a.tooltipStatLikes+'">'+a.statLikeIcon+"<span>0</span></div>"),q.append(g)),-1!=hc.indexOf("downloads")&&(g=ud&&void 0!=l.download?c('<a href="'+l.download+'" class="hap-stat-icon hap-download-count" download aria-label="'+a.tooltipStatDownloads+'" title="'+a.tooltipStatDownloads+'">'+a.statDownloadIcon+"<span>0</span></a>"):c('<div class="hap-stat-icon hap-download-count hap-no-download" title="'+
a.tooltipStatDownloads+'">'+a.statDownloadIcon+"<span>0</span></div>"),q.append(g))):a.createDownloadIconsInPlaylist&&ud&&l.download&&(h=c('<div class="hap-playlist-icons"></div>').appendTo(p),q=c('<a class="hap-download" href="'+l.download+'" download title="'+a.downloadIconTitle+'" aria-label="'+a.downloadIconTitle+'">'+a.downloadIcon+"</a>"),h.prepend(q));a.createLinkIconsInPlaylist&&l.link&&(h||(h=c('<div class="hap-playlist-icons"></div>').appendTo(p)),g=c('<a class="hap-link" href="'+l.link+
'" target="'+(l.target||"_blank")+'" title="'+a.linkIconTitle+'" aria-label="'+a.linkIconTitle+'">'+a.linkIcon+"</a>"),h.prepend(g));l.customContent&&(p.append(l.customContent),delete l.customContent);a.playlistItemMarkup&&p.append(a.playlistItemMarkup);if(a.addPlaylistEvents&&(t.on("click",ea),!lb))t.on("mouseenter",Ea).on("mouseleave",Ka)}else a.useStatistics&&void 0!=l.mediaId&&(l.title&&(q=l.title.replace(/['"\|]/g,""),l.safeTitle=q),l.artist&&(q=l.artist.replace(/['"\|]/g,""),l.safeArtist=q));
ib?f.push({id:b,type:n,data:l}):G.splice(k,0,{id:k,type:n,data:l})}ib?(Nb[da].data=f,vd?(Rb(!1),a.useStatistics&&ic()):(G=f,Rb(!0),a.useStatistics&&ic(),E.setPlaylistItems(v)),jc(),e=fc[0],e.style.height=e.scrollHeight+"px",Oc=!1,vd=!0):(Wa=w,console.log("playlistDataArr = ",G),Rb(!0),a.useStatistics&&ic(),$a?(k=E.getCounter(),E.setPlaylistItems(v,!1),ja<=k&&(qb||E.reSetCounter(k+e)),console.log("playlistFirstInit, addTrackPlayit",Ya,rb),Ya&&(Ya=!1,ba=rb),console.log("before endinit ",ba),rb&&E.setCounter(ja,
!1),sb=!1):E.setPlaylistItems(v),jc())}function qd(a,c){var b,d=a.length,e="";for(b=0;b<d;b++){var f=a[b].parent.replace(/"/g,"'");"undefined"!==c.activeAccordion&&c.activeAccordion==f&&(da=b);e+='<div class="hap-accordion-item" data-id="'+b+'" title="'+f+'"><span class="hap-accordion-item-title">'+f+'</span><div class="hap-accordion-item-content">';a[b].description&&(e+='<span class="hap-accordion-item-description">'+a[b].description+"</span>");e+="</div></div>"}w.html(e)}function Rb(b){b&&(v=G.length);
if(a.usePlaylist){var d=0,m,e,f;w.find(".hap-playlist-item").each(function(){m=c(this).attr("data-id",d);f=m.find(".hap-playlist-title");f.length&&a.useNumbersInPlaylist&&(e=HAPUtils.formatNumber(d)+a.numberTitleSeparator,m.find(".hap-playlist-title-num").length?m.find(".hap-playlist-title-num").html(e):f.before(c('<span class="hap-playlist-title-num">'+e+"</span>")));b&&(G[d].id=d);d++})}}function ic(){var a,c=[];for(a=0;a<v;a++){var m=G[a].data;m.id=a;m.hapStatsSet||void 0==m.mediaId||(c.push({media_id:m.mediaId,
title:m.safeTitle||"",artist:m.safeArtist||""}),m.hapStatsSet=!0)}c.length&&tb("hap_all_count",null,c)}function Xd(b){b.mCustomScrollbar({axis:"horizontal"==a.playlistScrollOrientation?"x":"y",theme:a.playlistScrollTheme,scrollInertia:0,mouseWheel:{normalizeDelta:!0,deltaFactor:50,preventDefault:!0},keyboard:{enable:!1},advanced:{autoExpandHorizontalScroll:!0},callbacks:{onOverflowYNone:function(){b.find(".mCSB_container").addClass("hap-mCSB_full")},onOverflowY:function(){b.find(".mCSB_container").removeClass("hap-mCSB_full")},
onTotalScroll:function(){ia?L&&ca&&!Q&&(Q=!0,ra.show(),ta=!0,H=[],X&&X.css("opacity",0),"soundcloud"==ca?td():"podcast"==ca?sd():"folder"==ca?rd():"youtube"==ca&&(Za||Lc("youtube"),Za.resumeLoad(L))):ab&&(ta||Pc())}}})}function jc(){ra.hide();Q=!1;if(!u){u=!0;a.usePlaylistScroll&&!Sb&&(Oa.length&&Xd(Oa),Sb=!0);if(w.find(".hap-playlist-options").length){A=w.find(".hap-playlist-options");void 0!=A.attr("data-add-more-num-results")&&void 0!=A.attr("data-add-more-limit")&&void 0!=A.attr("data-add-more-offset")&&
void 0!=A.attr("data-add-more-sort-order")&&(kc=parseInt(A.attr("data-add-more-limit"),10),lc=parseInt(A.attr("data-add-more-num-results"),10),ub=parseInt(A.attr("data-add-more-offset"),10),Qc=A.attr("data-add-more-sort-order"),Rc=A.attr("data-encrypt-media-paths"));void 0==A.attr("data-thumb-global")||HAPUtils.isEmpty(A.attr("data-thumb-global"))||(Tb=A.attr("data-thumb-global"));void 0==A.attr("data-start")||HAPUtils.isEmpty(A.attr("data-start"))||(mc=Number(A.attr("data-start")));void 0==A.attr("data-end")||
HAPUtils.isEmpty(A.attr("data-end"))||(nc=Number(A.attr("data-end")));if(void 0!=A.attr("data-playback-rate")&&!HAPUtils.isEmpty(A.attr("data-playback-rate"))){var b=Number(A.attr("data-playback-rate"));vb=HAPUtils.valueLimit(b,a.playbackRateMin,a.playbackRateMax)}void 0!=A.attr("data-add-more-on-total-scroll")&&(ab=!0);void 0!=A.attr("data-media-prefix-url")&&(Ba=A.attr("data-media-prefix-url"));void 0!=A.attr("data-ad-pre")&&(wb=A.attr("data-ad-pre").split(",").map(function(a){return a.trim()}),
void 0!=A.attr("data-shuffle-ads")&&1<wb.length&&HAPUtils.shuffleArray(wb));void 0!=A.attr("data-ad-mid")&&(xb=A.attr("data-ad-mid").split(",").map(function(a){return a.trim()}),void 0!=A.attr("data-shuffle-ads")&&1<xb.length&&HAPUtils.shuffleArray(xb),void 0!=A.attr("data-ad-mid-interval")&&(oc=A.attr("data-ad-mid-interval")));void 0!=A.attr("data-ad-end")&&(yb=A.attr("data-ad-end").split(",").map(function(a){return a.trim()}),void 0!=A.attr("data-shuffle-ads")&&1<yb.length&&HAPUtils.shuffleArray(yb))}setTimeout(function(){a.hidePlayerUntilMusicStart||
(Sc(),-1<P.indexOf("hap-fixed")&&wd(),pc.css("opacity",1));c(n).trigger("setupDone",{instance:n,instanceName:a.instanceName})},100);O(a.volume);ib&&(zb=k.find(".hap-accordion-item").eq(da),k.find(".hap-accordion-item-title").on("click",function(){var b=c(this).closest(".hap-accordion-item");if(b.hasClass("hap-accordion-item-opened")){b.removeClass("hap-accordion-item-opened");var d=b.find(".hap-accordion-item-content")[0];d.style.height="0"}else{a.allowOnlyOneOpenedAccordion&&zb&&zb!=b&&(zb.removeClass("hap-accordion-item-opened"),
d=zb.find(".hap-accordion-item-content")[0],d.style.height="0");if(b.hasClass("hap-accordion-item-inited"))d=b.find(".hap-accordion-item-content")[0],d.style.height=d.scrollHeight+"px";else{if(Oc)return!1;Oc=!0;ra.show();da=b.attr("data-id");w=fc=b.addClass("hap-accordion-item-inited").find(".hap-accordion-item-content");H=Nb[da].media;Nc?(Pa=-1,W=H.length-1,Pb()):Ga()}zb=b.addClass("hap-accordion-item-opened")}}))}if(a.usePlaylist&&0<v){var d=[];w.find(".hap-thumbimg:not(.hap-visible)").each(function(){d.push(c(this))});
var m=0;b=d.length;var e;for(e=0;e<b;e++)setTimeout(function(){clearTimeout(this);d[m].addClass("hap-visible");m++},50+50*e);HAPUtils.isEmpty(qa)||n.sort(qa)}if(!Tc&&!$a&&!ta&&0<v){if(void 0!=a.mediaId){a.mediaTitle?(b=w.find(".hap-playlist-item[data-media-id="+a.mediaId+'][data-safe-title="'+a.mediaTitle+'"]'),0==b.length&&(b=w.find(".hap-playlist-item[data-media-id="+a.mediaId+"]")),delete a.mediaTitle):b=w.find(".hap-playlist-item[data-media-id="+a.mediaId+"]");b=w.children(".hap-playlist-item").index(b);
if(void 0==b||-1==b)return alert("No media with ID to load! LoadMedia failed."),!1;delete a.mediaId;E.processPlaylistRequest(b)}else b=a.activeItem,b>v-1&&(b=v-1),-1<b&&E.setCounter(b,!1);Tc=!0}ta=$a=!1;X&&(ia?L?X.css("opacity",1):(X.remove(),X=null,ia=!1):ab?0<lc?lc>ub?X.css("opacity",1):(X.remove(),X=null,ab=!1):(X.remove(),X=null):(X.remove(),X=null));c(n).trigger("playlistEndLoad",{instance:n,instanceName:a.instanceName});-1<P.indexOf("hap-wall")&&(qc?w.masonry("reloadItems"):("undefined"===typeof c.fn.masonry&&
console.log("Link to masonry.pkgd.min.js file missing in head tag!"),"function"!==typeof imagesLoaded&&console.log("Link to imagesloaded.pkgd.min file missing in head tag!"),qc=w.masonry({itemSelector:".hap-playlist-item",columnWidth:".hap-grid-sizer"})),w.imagesLoaded(function(){qc.masonry("layout")}),w.find(".hap-playlist-item-content:not(.hap-has-overlay)").each(function(){c(this).addClass("hap-has-overlay").find(".hap-playlist-thumb").after(c('<div class="hap-wall-overlay"></div>'))}))}function xd(){Qa=
new Hls;Uc=Hls.isSupported();yd=!0;Qa.on(Hls.Events.MEDIA_ATTACHED,function(){Qa.loadSource(I)});Qa.on(Hls.Events.ERROR,function(a,c){if(c.fatal)switch(c.type){case Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover");Qa.startLoad();break;case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover");Qa.recoverMediaError();break;default:Qa.destroy()}})}function Ub(){console.log("initAudio");if("hls"==h){if(I=e.path,!yd){if("undefined"===
typeof Hls){var b=document.createElement("script");b.type="text/javascript";b.src="https://cdn.jsdelivr.net/npm/hls.js@latest";b.onload=b.onreadystatechange=function(){this.readyState&&"complete"!=this.readyState||(xd(),Ub())};b.onerror=function(){alert("Error loading "+this.src)};var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)}else xd(),Ub();return}}else if("shoutcast"==h||"icecast"==h||"radiojar"==h)I=a.useCorsForAudio?a.cors+e.path:e.path,e.mountpoint&&(I+=e.mountpoint),
"shoutcast"==h&&"/;"!=I.substring(I.length-2)&&(I+="/;"),Vb||("undefined"===typeof HAPRadioData&&console.log("link to radio.js file missing in head tag!"),Vb=new HAPRadioData(a,ha),c(Vb).on("HAPRadioData.DATA_READY",function(a,b){b.title&&(e.title=b.title);b.artist&&(e.artist=b.artist);b.thumb&&(e.thumb=b.thumb);rc()})),Vb.getData(e);else for(b=0;b<zd.length;b++)if(d=zd[b],"mp3"==d){if(Yd&&e.mp3){I=e.mp3;break}}else if("aac"==d){if(Zd&&e.aac){I=e.aac;break}}else if("wav"==d){if($d&&e.wav){I=e.wav;
break}}else if("flac"==d){if(ae&&e.flac){I=e.flac;break}}else if("path"==d&&e.path){I=e.path;break}if(I){-1!=I.indexOf("ebsfm:")&&(I=atob(I.substr(6)));"audio"==h&&Ba&&!HAPUtils.relativePath(I)&&(I=Ba+I);sc.on("ended",function(){z&&z.isAdEndOn()||(eb&&za&&!la&&!Yb.isDrag()?(la=!0,p.currentTime=ma,p.play()):Dc())}).on("canplay",function(a){}).on("canplaythrough",function(a){}).on("loadedmetadata",function(){void 0==e.playbackRate&&(e.playbackRate=1);p.playbackRate=e.playbackRate;fb&&fb.setVisual(e.playbackRate);
"audio"==h&&(a.resumeTime?(p.currentTime=a.resumeTime,delete a.resumeTime):e.start&&(p.currentTime=e.start));var b=p.duration;HAPUtils.isNumber(b)&&Ca.html(HAPUtils.formatTime(b))}).on("play",function(){kd()}).on("pause",function(){ld()}).on("seeked",function(){eb&&za&&setTimeout(function(){clearTimeout(this);la=!1},500)}).on("error",function(b){c(n).trigger("soundError",{instance:n,instanceName:a.instanceName,counter:ua,error:b})});if("hls"==h){if("file:"==window.location.protocol)return console.log("Playing HLS requires server connection!"),
!1;if(Uc)Qa.attachMedia(p);else if(p.canPlayType("application/vnd.apple.mpegurl"))p.src=I;else if(e.mp3)p.src=e.mp3;else{alert("This browser or device does not support HLS extension. Please use mp3 audio for playback!");return}ba&&(b=p.play(),void 0!==b&&b.then(function(){})["catch"](function(a){}))}else p.src=I,ba&&(b=p.play(),void 0!==b&&b.then(function(){})["catch"](function(a){}));p.volume=J;ba=!0;"shoutcast"!=h&&"icecast"!=h&&"radiojar"!=h&&(Ta&&clearInterval(Ta),Ta=setInterval(id,jd))}else alert("No required audio format supplied! Please add mp3 audio format to play!")}
function id(){if(!(gb||a.pauseAudioDuringAds&&z&&z.isAdOn())){if("youtube"==h){if(y){var b=y.getCurrentTime(),d=y.getDuration();var m=y.getVideoLoadedFraction()}}else if("audio"==h&&p&&(b=p.currentTime,d=p.duration,HAPUtils.isNumber(b)&&HAPUtils.isNumber(d)&&"undefined"!==typeof p.buffered&&0!=p.buffered.length)){try{var g=p.buffered.end(p.buffered.length-1)}catch(r){}isNaN(g)||(m=g/d)}HAPUtils.isNumber(b)&&HAPUtils.isNumber(d)&&(!tc&&0<b&&Ra&&(tc=!0,c(n).trigger("soundPlay",{instance:n,instanceName:a.instanceName,
data:e})),Fb?$b.drawSeekbar(m,b,d):(oa.width(b/d*M),m&&Ad.width(m*M)),Ia.html(HAPUtils.formatTime(b)),Ca.html(HAPUtils.formatTime(d)),!gb&&e.end&&b>=e.end?Dc():eb&&za&&!la&&!Yb.isDrag()&&(parseInt(b,10)<parseInt(ma,10)||b>Sa)&&(la=!0,n.seek(ma)))}}function kd(){Hb||(Hb=!0,M=Gb.width(),e.adMid&&z.adMidStartHandler());e.adMid&&z.adMidPlayHandler();if(a.togglePlaybackOnMultipleInstances&&1<hap_mediaArr.length){var b,d=hap_mediaArr.length;for(b=0;b<d;b++)n!=hap_mediaArr[b].inst&&hap_mediaArr[b].inst.pauseMedia()}tc&&
c(n).trigger("soundPlay",{instance:n,instanceName:a.instanceName,data:e});va.find(".hap-btn-play").hide();va.find(".hap-btn-pause").show();Ra=!0;a.hidePlayerUntilMusicStart&&(a.hidePlayerUntilMusicStart=!1,pc.removeClass("hap-music-player-force-hidden"),Sc(),-1<P.indexOf("hap-fixed")&&wd(),setTimeout(function(){pc.css("opacity",1)},50));uc&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+a.instanceName,eventAction:"played",eventLabel:"title: "+Qb(e,!0)+" | time: "+
Math.round(n.getCurrentTime()),nonInteraction:!0});-1<P.indexOf("hap-fixed")&&Bd(!0)}function ld(){va.find(".hap-btn-play").show();va.find(".hap-btn-pause").hide();Ra=!1;c(n).trigger("soundPause",{instance:n,instanceName:a.instanceName,data:e});uc&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+a.instanceName,eventAction:"paused",eventLabel:"title: "+Qb(e,!0)+" | time: "+Math.round(n.getCurrentTime()),nonInteraction:!0});-1<P.indexOf("hap-fixed")&&Bd()}function Dc(){z&&
z.clearAdMidTimeout();c(n).trigger("soundEnd",{instance:n,instanceName:a.instanceName,data:e});a.useStatistics&&tb("hap_finish_count",ua);uc&&"undefined"!==typeof ga&&ga("send",{hitType:"event",eventCategory:"Modern audio player: "+a.instanceName,eventAction:"ended",eventLabel:"title: "+Qb(e,!0),nonInteraction:!0});e.adEnd?z.setAdEnd():Cd()}function Cd(b){console.log("audioEndedAction");var c=e.start||0;"single"==a.loopState?(b||Jb(),"youtube"==h?y&&(y.seekTo(c),y.playVideo()):(b&&(p.src=I),p.currentTime=
c,p.play())):"off"!=a.loopState&&"playlist"!=a.loopState||n.nextMedia()}function Ab(){console.log("cleanMedia");Ta&&clearInterval(Ta);z&&(z.cleanAds(),oa.removeClass("hap-ad-progress-level"),bb.hide());"shoutcast"==h||"icecast"==h||"radiojar"==h?Vb.destroy():"hls"==h?Uc&&Qa.detachMedia():"youtube"==h&&y&&(Zb=!0,db.hide(),aa&&y.stopVideo(),Ec=!1);p&&(p.pause(),p.src="");sc&&sc.off("ended canplay canplaythrough loadedmetadata pause play error timeupdate seeked");Ia.html("00:00");Ca.html("00:00");Dd.html("");
Ed.html("");oa.width(0);Ad.width(0);h=null;rb=Hb=Ra=!1;be||(ba=!1);eb&&n.resetRange();va.find(".hap-btn-play").show();va.find(".hap-btn-pause").hide();tc=!1;a.useTitleScroll&&mb&&mb.deactivate()}function dc(){"undefined"!==typeof c.fn.masonry&&qc&&w.masonry("destroy");h&&(Ab(),V&&La());w.empty();Wa=null;Tc=Ya=$a=!1;v=0;Xa=-1;G=[];H=[];N=[];E.reSetCounter();yb=oc=xb=wb=vb=nc=mc=Tb=A=null;ab=!1;Ba=null;ha.css("backgroundImage","none").css("opacity",0);ta=!1;ca=L=null;ia=!1;Rc=Qc=ub=lc=kc=null;qa="";
Na.find(".hap-btn-sort-alpha-up").hide();Na.find(".hap-btn-sort-alpha-down").show();Fd.val("");vc.hide();c(n).trigger("destroyPlaylist",{instance:n,instanceName:a.instanceName})}function Jb(){wc&&Vc&&(G[ua].data.start=n.getCurrentTime());a.useStatistics&&tb("hap_play_count",ua)}function Sc(){M=Gb.width();z&&z.setSeekBarSize(M);a.useTitleScroll&&mb&&mb.checkSize();if(eb&&"undefined"!==typeof ma&&"undefined"!==typeof Sa){var b=n.getDuration();"undefined"!==typeof b&&(wa&&wa.css("left",ma/b*M+"px"),
Da&&Da.css("left",Sa/b*M+"px"))}t.hide();b=k.width();b<a.playlistItemMultilineWidth?w.addClass("hap-playlist-item-multiline"):w.removeClass("hap-playlist-item-multiline");if(a.breakPointArr){var c,e=a.breakPointArr.length;for(c=0;c<e;c++){var g=a.breakPointArr[c];b<g?k.addClass("hap-breakpoint-"+g.toString()):k.removeClass("hap-breakpoint-"+g.toString());-1<P.indexOf("hap-fixed")&&(a.playerOpened||k.css({bottom:-k.height()+"px"}))}}}function Qb(b,c){if(b.artist&&!HAPUtils.isEmpty(b.artist)&&b.title&&
!HAPUtils.isEmpty(b.title))var d=c?b.artist+" - "+b.title:b.artist+a.artistTitleSeparator+b.title;else b.title&&!HAPUtils.isEmpty(b.title)?d=b.title:b.artist&&!HAPUtils.isEmpty(b.artist)&&(d=b.artist);return d}function rc(){e.title&&Dd.html(e.title);e.artist&&Ed.html(e.artist);e.description&&k.find(".hap-player-desc").html(e.description);a.useTitleScroll&&mb&&mb.input(Qb(e));if((!Wc||!Tb)&&ha.length){var b=e.thumb||e.thumbDefault;b&&Gd(b)}}function Gd(b){!Ba||e.thumbIsBase64||HAPUtils.relativePath(b)||
(b=Ba+b);"soundcloud"==e.origtype&&a.soundCloudThumbQuality&&(b=b.replace("large.jpg",a.soundCloudThumbQuality));b=encodeURI(b);-1<ha.css("backgroundImage").indexOf(b)||(e.title?ha.attr("aria-label",e.title):ha.attr("aria-label",""),Wc?(ha.css("opacity",0),setTimeout(function(){ha.css("backgroundImage","url("+b+")").css("opacity",1)},300)):ha.css("backgroundImage","url("+b+")").css("opacity",1),Wc=!0,(-1<P.indexOf("hap-metalic")||-1<P.indexOf("hap-poster"))&&k.find(".hap-player-image").fadeOut(300,
function(){c(this).css("backgroundImage","url("+b+")").fadeIn(300)}))}function ce(){var b=e.title||"";b="https://itunes.apple.com/search?type=jsonp&term=="+encodeURI(e.artist||"")+"-"+encodeURI(b)+"&media=music&limit=1";c.ajax({url:b,dataType:"jsonp"}).done(function(b){if(b.results[0]&&b.results[0].artworkUrl100){var c=ha.width();c=HAPUtils.closestNumber(a.artworkSize,c);b=b.results[0].artworkUrl100.replace("100x100",c+"x"+c);G[ua].data.thumb=b;Gd(b)}}).fail(function(a,b,c){console.log(a,b,c)})}function tb(b,
d,e){if("file:"!=window.location.protocol){if("hap_all_count"==b)var g=[{name:"action",value:b},{name:"data",value:JSON.stringify(e)}];else if("hap_play_count"==b){if(!G[d])return;e=G[d].data;g=[{name:"action",value:b},{name:"playlist_id",value:a.playlistId},{name:"media_id",value:e.mediaId},{name:"title",value:e.safeTitle||""},{name:"artist",value:e.safeArtist||""},{name:"currentTime",value:p.currentTime},{name:"duration",value:p.duration}]}else if("hap_download_count"==b||"hap_like_count"==b||"hap_finish_count"==
b)e=G[d].data,g=[{name:"action",value:b},{name:"playlist_id",value:a.playlistId},{name:"media_id",value:e.mediaId},{name:"title",value:e.safeTitle||""},{name:"artist",value:e.safeArtist||""}];c.ajax({url:a.ajax_url,type:"post",data:g,dataType:"json"}).done(function(c){if(a.usePlaylist&&c){var e=w.find('.hap-playlist-item[data-id="'+d+'"]');if("hap_like_count"==b&&c.c_like)e.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(c.c_like,10),1));else if("hap_download_count"==b&&c.c_download)e.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(c.c_download,
10),1));else if("hap_play_count"==b&&c.c_play)e.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(c.c_play,10),1));else if("hap_all_count"==b){var g=c.length,m;for(e=0;e<g;e++){var f=c[e];f.title&&f.artist?m=w.find('.hap-playlist-item[data-media-id="'+f.media_id+'"][data-safe-title="'+f.title+'"][data-safe-artist="'+f.artist+'"]'):f.title?m=w.find('.hap-playlist-item[data-media-id="'+f.media_id+'"][data-safe-title="'+f.title+'"]'):f.artist&&(m=w.find('.hap-playlist-item[data-media-id="'+
f.media_id+'"][data-safe-artist="'+f.artist+'"]'));m.find(".hap-like-count span").html(HAPUtils.nFormatter(parseInt(f.c_like,10),1));m.find(".hap-download-count span").html(HAPUtils.nFormatter(parseInt(f.c_download,10),1));m.find(".hap-play-count span").html(HAPUtils.nFormatter(parseInt(f.c_play,10),1))}}}}).fail(function(a,b,c){console.log("Error getStats: "+a.responseText,b,c)})}}function wd(){-1<P.indexOf("hap-fixed")&&(nb.on("click",function(){a.playerOpened?(k.stop().animate({bottom:-k.height()+
"px"},{duration:400,complete:function(){nb.find(".hap-btn").hide();nb.find(".hap-btn-player-open").show();0<v&&h&&cb.show()}}),a.playlistOpened=!1):(k.stop().animate({bottom:-xa.height()+"px"},{duration:400}),nb.find(".hap-btn").hide(),nb.find(".hap-btn-player-close").show(),cb.hide());a.playerOpened=!a.playerOpened}),cb.on("click",function(a){n.togglePlayback()}),cb.find(".hap-btn-play").show(),k.hasClass("hap-fixed-inited")||(k.addClass("hap-fixed-inited"),setTimeout(function(){a.playerOpened?(a.playlistOpened?
k.css({bottom:"0px"}):k.css({bottom:-xa.height()+"px"}),nb.find(".hap-btn-player-close").show()):(a.playlistOpened=!1,k.css({bottom:-k.height()+"px"}),nb.find(".hap-btn-player-open").show(),0<v&&h&&cb.show())},100)))}function Bd(a){cb.find(".hap-btn").hide();a?cb.find(".hap-btn-pause").show():cb.find(".hap-btn-play").show()}function Pc(){ra.show();ta=!0;X&&X.css("opacity",0);c.ajax({url:a.ajax_url,type:"post",data:[{name:"action",value:"hap_add_more"},{name:"playlist_id",value:a.playlistId},{name:"addMoreOffset",
value:ub},{name:"addMoreLimit",value:kc},{name:"addMoreSortOrder",value:Qc},{name:"encryptMediaPaths",value:Rc}],dataType:"json"}).done(function(a){A&&void 0!=A.attr("data-add-more-offset")&&(ub=parseInt(A.attr("data-add-more-offset"),10)+kc,A.attr("data-add-more-offset",ub));n.addTrack(a)}).fail(function(a,c,e){console.log(a,c,e);n.endLoadMore()})}a=c.extend(!0,{},{mediaId:null,mediaTitle:null,resumeTime:null,sourcePath:"",playlistItemContent:"",playlistTitleOrder:"title,artist",statisticsContent:"plays,likes,downloads",
audioFormatOrder:"aac,wav,mp3,flac,path",dataInterval:250,volume:.5,activeItem:0,numberTitleSeparator:".&nbsp;",artistTitleSeparator:"&nbsp;-&nbsp;",useNumbersInPlaylist:!1,preload:"auto",autoPlay:!1,loopState:"playlist",randomPlay:!1,usePlaylist:!0,usePlaylistScroll:!1,useKeyboardNavigationForPlayback:!1,togglePlaybackOnMultipleInstances:!0,useTitleScroll:!1,titleScrollSpeed:1,titleScrollSeparator:" *** ",addPlaylistEvents:!0,continousKey:"hap-continous-key",useMediaSession:!0,createDownloadIconsInPlaylist:!1,
createLinkIconsInPlaylist:!1,useShare:!0,linkIconTitle:"Purchase",downloadIconTitle:"Download",tooltipStatPlays:"Plays",tooltipStatLikes:"Likes",tooltipStatDownloads:"Downloads",artworkSize:[100,200,250,340,460,600],soundCloudThumbQuality:"t300x300.jpg",playbackRateMin:.5,playbackRateMax:2,sortOrder:"",playlistItemMultilineWidth:600,searchDescriptionInPlaylist:!0,hideYoutubeAfterStart:!1,getRadioArtwork:!0,defaultSongArtist:"DATA NOT AVAILABLE",defaultSongTitle:"DATA NOT AVAILABLE",lastPlayedInterval:1E4,
enableCors:!0,cors:"https://kastproxy-us.herokuapp.com/,https://kastproxy-eu.herokuapp.com/,https://cors-anywhere.herokuapp.com/,https://cors.io/?",useCorsForAudio:!1,seekTime:10,whatsAppWarning:"Please share this content on mobile device!",downloadIcon:"<svg viewBox='0 0 512 512'><path d='M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z'></path></svg>",
linkIcon:"<svg viewBox='0 0 576 512'><path d='M504.717 320H211.572l6.545 32h268.418c15.401 0 26.816 14.301 23.403 29.319l-5.517 24.276C523.112 414.668 536 433.828 536 456c0 31.202-25.519 56.444-56.824 55.994-29.823-.429-54.35-24.631-55.155-54.447-.44-16.287 6.085-31.049 16.803-41.548H231.176C241.553 426.165 248 440.326 248 456c0 31.813-26.528 57.431-58.67 55.938-28.54-1.325-51.751-24.385-53.251-52.917-1.158-22.034 10.436-41.455 28.051-51.586L93.883 64H24C10.745 64 0 53.255 0 40V24C0 10.745 10.745 0 24 0h102.529c11.401 0 21.228 8.021 23.513 19.19L159.208 64H551.99c15.401 0 26.816 14.301 23.403 29.319l-47.273 208C525.637 312.246 515.923 320 504.717 320zM408 168h-48v-40c0-8.837-7.163-16-16-16h-16c-8.837 0-16 7.163-16 16v40h-48c-8.837 0-16 7.163-16 16v16c0 8.837 7.163 16 16 16h48v40c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-40h48c8.837 0 16-7.163 16-16v-16c0-8.837-7.163-16-16-16z'></path></svg>",
statDownloadIcon:"<svg viewBox='0 0 512 512'><path d='M504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zM212 140v116h-70.9c-10.7 0-16.1 13-8.5 20.5l114.9 114.3c4.7 4.7 12.2 4.7 16.9 0l114.9-114.3c7.6-7.6 2.2-20.5-8.5-20.5H300V140c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12z'></path></svg>",statLikeIcon:"<svg viewBox='0 0 512 512'><path d='M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z'></path></svg>",
statPlayIcon:"<svg viewBox='0 0 512 512'><path d='M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z'></path></svg>"},a);var Xc=HAPUtils.getUrlParameter(),Wb=[],Yc=[];Object.keys(Xc).forEach(function(b){if(0==b.indexOf("hap-")){var c=b.substr(4).replace(/-([a-z])/g,function(a){return a[1].toUpperCase()});if(b=decodeURIComponent(Xc[b]).replace(/\+/g," "))a.hasOwnProperty(c)?
("true"===b?b=!0:"false"===b&&(b=!1),a[c]=b):(b=b.split(",").map(function(a){return a.trim()}),Wb.push({key:c,value:b}))}});if(Wb.length){var ya,xc,Zc=Wb.length,de=Wb[0].value.length;for(xc=0;xc<de;xc++){var $c={};for(ya=0;ya<Zc;ya++){var Xb=Wb[ya];var Bb=Xb.value[xc];"true"===Bb?Bb=!0:"false"===Bb&&(Bb=!1);$c[Xb.key]=Bb;"type"===Xb.key&&($c.origtype=Bb)}Yc.push($c)}}Xc=null;var k=c(this).css("display","block"),pc=k.find(".hap-player-outer");a.hidePlayerUntilMusicStart&&pc.addClass("hap-music-player-force-hidden");
var P="";void 0!=k.attr("class")&&(P=k.attr("class").split(/\s+/));a.markup&&k.append(a.markup);var Jc=c(a.playlistList),xa=k.find(".hap-playlist-holder"),Oa=k.find(".hap-playlist-inner"),w=k.find(".hap-playlist-content"),vc=k.find(".hap-playlist-filter-msg"),Na=k.find(".hap-sort-alpha"),ee=k.find(".hap-popup-toggle"),Gb=k.find(".hap-progress-bg"),Ad=k.find(".hap-load-level"),oa=k.find(".hap-progress-level"),ob=k.find(".hap-volume-toggle"),pa=k.find(".hap-volume-seekbar"),Ua=k.find(".hap-volume-bg"),
Od=k.find(".hap-volume-level"),yc=k.find(".hap-player-holder"),ha=k.find(".hap-player-thumb").attr("role","img"),Hc=k.find(".hap-share-holder"),Ic=k.find(".hap-playback-rate-holder"),Dd=k.find(".hap-player-title"),Ed=k.find(".hap-player-artist"),Ia=k.find(".hap-media-time-current"),Ca=k.find(".hap-media-time-total"),bb=k.find(".hap-media-time-ad"),va=k.find(".hap-playback-toggle"),jb=k.find(".hap-loop-toggle"),Fa=k.find(".hap-random-toggle"),Cb=k.find(".hap-range-toggle"),bc=k.find(".hap-playback-rate-toggle"),
cc=k.find(".hap-share-toggle"),ra=k.find(".hap-preloader"),cb=k.find(".hap-playback-toggle-ex"),nb=k.find(".hap-player-toggle-ex"),lb=HAPUtils.isMobile(),Hd=HAPUtils.hasLocalStorage(),ba=a.autoPlay,be=ba,J=a.volume,Ha=a.playlistItemContent.replace(/\s+/g,"").split(","),Wd=a.playlistTitleOrder.replace(/\s+/g,"").split(","),hc=a.statisticsContent.replace(/\s+/g,"").split(","),wc=a.useContinousPlayback&&Hd,Vc=wc&&a.continousPlaybackTrackAllSongs,ad=a.useMediaSession&&"mediaSession"in navigator&&"file:"!=
window.location.protocol,uc=a.useGa&&a.gaTrackingId,qa=a.sortOrder,zd=a.audioFormatOrder.split(",").map(function(a){return a.trim()}),fe=a.fetchPlayerArtwork&&ha.length;a.playlistContent&&(w=c(a.playlistContent));var n=this,u;c("body");var ac=c(window),Ma=c(document),bd,ud=HAPUtils.hasDownloadSupport(),Kb=HAPUtils.isIOS();HAPUtils.isAndroid();var Yd=HAPUtils.canPlayMp3(),$d=HAPUtils.canPlayWav(),Zd=HAPUtils.canPlayAac(),ae=HAPUtils.canPlayFlac();HAPUtils.isChrome();HAPUtils.isSafari();HAPUtils.volumeCanBeSet();
var Vd=a.sourcePath+"includes/ba-simple-proxy.php",Ob=["playlist","single","off"],kb=Ob.indexOf(a.loopState),Id=["audio","hls","shoutcast","icecast","radiojar"],ge="audio youtube_single hls shoutcast icecast radiojar".split(" "),Ba,qc,W,Pa,sc=c(document.createElement("audio")).attr("preload",a.preload),p=sc[0],tc,ab,kc,lc,ub,Rc,Qc,L,ta,ca,ia,Mc,Kc,U,sa=[],Qa,Uc,yd,Vb,z,Lb,md,Za,db,y,fd,aa,Ec,Zb,hd,gd,Jd,Sb,Gc,Wc,Tb,mc,nc,vb,wb,xb,oc,yb,qb,ja,$a,rb,Ya,Xa=-1,G=[],H=[],N=[],A,v=0,Tc,V,Hb,h,I,ua,Ra=!1,
sb,e,jd=a.dataInterval,Ta,gb,M,fa=HAPUtils.getEvents(),zb,Oc,ib,fc,vd,da,Mb,Nb=[],Nc;ib&&(a.usePlaylist=!0);-1==Ha.indexOf("description")&&(a.searchDescriptionInPlaylist=!1);"undefined"===typeof window.hap_mediaArr&&(window.hap_mediaArr=[]);window.hap_mediaArr.push({inst:n,id:a.instanceName});lb&&(ba=!1);-1==kb&&(a.loopState="off");kb=Ob.indexOf(a.loopState);jb.find(".hap-btn-loop-"+a.loopState).show();a.randomPlay?Fa.find(".hap-btn-random-on").show():Fa.find(".hap-btn-random-off").show();if(a.playlistSelector)c(a.playlistSelector).on("change",
function(){n.loadPlaylist(c(this).val())});a.breakPointArr&&"string"===typeof a.breakPointArr&&(a.breakPointArr=a.breakPointArr.split(","),HAPUtils.sortNumericArray(a.breakPointArr));0==w.length&&(a.usePlaylist=!1,a.usePlaylistScroll=!1,a.useNumbersInPlaylist=!1);ob.find(".hap-btn-volume-up").show();Na.find(".hap-btn-sort-alpha-down").show();va.find(".hap-btn-play").show();var X=k.find(".hap-load-more-btn").on("click",function(){if(!u||ta)return!1;ia?n.loadMore():ab&&Pc();X.css("opacity",0)}),mb;
a.useTitleScroll&&("undefined"===typeof HAPTextScroller?console.log("link to textscroller.js file missing in head tag"):mb=new HAPTextScroller({settings:a,mask:k.find(".hap-media-title-mask"),container:k.find(".hap-media-title")}));var Fd=a.searchSelector?c(a.searchSelector):k.find(".hap-search-filter");Fd.on("keyup",function(){if(0==v)return!1;var b=c(this).val().toLowerCase(),d,e=0;for(d=0;d<v;d++){var g=w.children(".hap-playlist-item").eq(d);var f=g.find(".hap-playlist-title").html().toLowerCase();
a.searchDescriptionInPlaylist&&g.find(".hap-playlist-description").length&&(f+=g.find(".hap-playlist-description").html().toLowerCase());-1<f.indexOf(b)?g.show():(g.hide(),e++)}e==v?vc.show():vc.hide()});a.useShare&&"undefined"!==typeof HAPShareManager&&(md=new HAPShareManager(a));var E=new HAPPlaylistManager({loop:a.loopState,random:a.randomPlay});c(E).on("HAPPlaylistManager.COUNTER_READY",function(b,d){h&&Ab();ua=d;e=G[ua].data;console.log(e,G);h=e.type;Tb&&(e.thumb=Tb);vb&&(e.playbackRate=vb);
mc&&(e.start=mc);nc&&(e.end=nc);wb&&!e.adPre&&(e.adPre=wb);xb&&!e.adMid&&(e.adMid=xb);oc&&(e.adMidInterval=oc);yb&&!e.adEnd&&(e.adEnd=yb);console.log("isEnqueue",sb);if(sb)sb=!1;else{"shoutcast"==h||"icecast"==h||"radiojar"==h||"hls"==h?(Cb.hide(),Aa.hide(),Ia.hide(),Ca.hide(),"hls"==h&&rc()):(Cb.show(),Aa.show(),Ia.show(),Ca.show(),rc(),ad&&C());if(Vc&&a.lastPositionArr){var m,g=a.lastPositionArr.length;for(m=0;m<g;m++){var k=a.lastPositionArr[m];if(k.title&&e.title==k.title&&e.artist==k.artist){e.start=
k.start;break}}}Ld(ua);e.thumb||e.thumbDefault||!fe||ce();if(e.adPre||e.adMid||e.adEnd)z?z.setAdData(e):("undefined"===typeof HAPAdManager&&console.log("link to admanager.js file missing in head tag!"),z=new HAPAdManager(a,n,e,J,p,oa,bb,M),c(z).on("HAPAdManager.IOS_ADMID_FIX_START",function(a,b){Lb=!0}).on("HAPAdManager.ADPRE_PLAY",function(a,b){oa.addClass("hap-ad-progress-level");Ia.hide();Ca.hide();bb.show()}).on("HAPAdManager.ADPRE_ENDED",function(a,b){oa.removeClass("hap-ad-progress-level");
bb.hide();"shoutcast"!=h&&"icecast"!=h&&"radiojar"!=h&&(Ia.show(),Ca.show());"youtube"==h?f():Ub()}).on("HAPAdManager.ADMID_PLAY",function(a,b){n.pauseMedia();oa.addClass("hap-ad-progress-level");Ia.hide();Ca.hide();bb.show()}).on("HAPAdManager.ADMID_ENDED",function(a,b){oa.removeClass("hap-ad-progress-level");bb.hide();"shoutcast"!=h&&"icecast"!=h&&"radiojar"!=h&&(Ia.show(),Ca.show());n.playMedia()}).on("HAPAdManager.ADEND_PLAY",function(a,b){oa.addClass("hap-ad-progress-level");Ia.hide();Ca.hide();
bb.show()}).on("HAPAdManager.ADEND_ENDED",function(a,b){oa.removeClass("hap-ad-progress-level");bb.hide();"shoutcast"!=h&&"icecast"!=h&&"radiojar"!=h&&(Ia.show(),Ca.hide());Cd(!0)}));e.adPre?(z.initAdPre(),ba=!0,p.volume=J,m=p.play(),void 0!==m&&m.then(function(){})["catch"](function(a){})):"youtube"==h?f():Ub()}}).on("HAPPlaylistManager.PLAYLIST_END",function(){c(n).trigger("playlistEnd",{instance:n,instanceName:a.instanceName})});window.onYouTubeIframeAPIReady=function(){};uc&&(window.ga||function(a,
c,e,f,h,k,n){a.GoogleAnalyticsObject=h;a[h]=a[h]||function(){(a[h].q=a[h].q||[]).push(arguments)};a[h].l=1*new Date;k=c.createElement(e);n=c.getElementsByTagName(e)[0];k.async=1;k.src=f;n.parentNode.insertBefore(k,n)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create",a.gaTrackingId,"auto"),ga("send","pageview"),k.on("click",".hap-download",function(b){if(!u)return!1;window.ga&&(b=c(this).closest(".hap-playlist-item").find(".hap-playlist-title").html(),ga("send",
{hitType:"event",eventCategory:"Modern audio player: "+a.instanceName,eventAction:"downloaded",eventLabel:"title: "+b,nonInteraction:!0}))}));wc?(window.attachEvent||window.addEventListener)(Kb?"pagehide":"beforeunload",function(b){window.event&&(window.event.cancelBubble=!0);if(!u||!h)return!1;b={activePlaylist:a.activePlaylist,volume:J,activeItem:E.getCounter(),resumeTime:n.getCurrentTime(),autoPlay:Ra};if(Vc){var c,e=[];for(c=0;c<v;c++){var f=G[c].data;f.start&&e.push({title:f.title,artist:f.artist,
start:f.start})}b.lastPositionArr=e}localStorage.setItem(a.continousKey,JSON.stringify(b))}):localStorage.removeItem(a.continousKey);ad&&(navigator.mediaSession.setActionHandler("play",function(){n.playMedia()}),navigator.mediaSession.setActionHandler("pause",function(){n.pauseMedia()}),navigator.mediaSession.setActionHandler("previoustrack",function(){n.previousMedia()}),navigator.mediaSession.setActionHandler("nexttrack",function(){n.nextMedia()}),navigator.mediaSession.setActionHandler("seekbackward",
function(){n.seekBackward()}),navigator.mediaSession.setActionHandler("seekforward",function(){n.seekForward()}));var t=k.find(".hap-tooltip");lb||(t.length&&"static"==k.css("position")&&console.log("player css position is static, therefore tooltip might not work correctly. Please set wrapper css position to other than static if you use tooltip in player."),k.on("mouseenter","[data-tooltip]",function(a){var b=c(this);a=k[0].getBoundingClientRect();var e=b[0].getBoundingClientRect();t.text(b.attr("data-tooltip"));
var f=parseInt(e.top-a.top-t.outerHeight());b=parseInt(e.left-a.left-t.outerWidth()/2+b.outerWidth()/2);b+t.outerWidth()>k.width()?b=k.width()-t.outerWidth():0>b&&(b=0);0>f+a.top&&(f=parseInt(e.top-a.top+t.outerHeight()+15));t.css({left:b+"px",top:f+"px"}).show()}).on("mouseleave","[data-tooltip]",function(a){t.hide()}));var Fb=k.find(".hap-circle-player").length,$b;Fb&&HAPUtils.hasCanvas()&&("undefined"===typeof HAPCirclePlayer?console.log("Link to circleplayer.js file missing in head tag!"):$b=
new HAPCirclePlayer({settings:a,parent:k}));var Aa=Fb?k.find(".hap-progress-canvas"):k.find(".hap-seekbar");Aa.on(fa.downEvent,function(b){if(a.disableSeekbarInRange&&za||Jd||a.disableSongSkip||z&&z.isAdOn()||!h)return!1;ka(b);return!1});if(!lb){var zc=function(){Aa.off(fa.moveEvent,S).off("mouseout",zc);Ma.off("mouseout",zc);t.hide()};Aa.on("mouseover",function(){if(!gb){if(z&&z.isAdOn())return!1;Aa.on(fa.moveEvent,S).on("mouseout",zc);Ma.on("mouseout",zc)}})}var Fc=.5,Ib,hb=pa.hasClass("hap-volume-vertical"),
Va=hb?Ua.height():Ua.width();0>J?J=0:1<J&&(J=1);0!=J&&(Fc=J);pa.on(fa.downEvent,function(a){Y(a);return!1});if(!lb){var Ac=function(){pa.off(fa.moveEvent,Ja).off("mouseout",Ac);Ma.off("mouseout",Ac);t.hide()};pa.on("mouseover",function(){Ib||(pa.on(fa.moveEvent,Ja).on("mouseout",Ac),Ma.on("mouseout",Ac))})}var wa=k.find(".hap-range-handle-a"),Da=k.find(".hap-range-handle-b"),cd=parseInt(wa.attr("data-width"),10),he=parseInt(Da.attr("data-width"),10),ma,Sa,Bc,Cc,za,la;n.toggleRange=function(){h&&(za?
(wa.css("display","none"),Da.css("display","none"),la=!0):(wa.css("display","block"),Da.css("display","block"),Bc=parseInt(wa.css("left"),10),Cc=parseInt(Da.css("left"),10),ma=Z(Bc),Sa=Z(Cc),la=!1),(za=!za)?Cb.addClass("hap-contr-btn-hover"):Cb.removeClass("hap-contr-btn-hover"))};n.resetRange=function(){za=!1;la=!0;wa.css({display:"none",left:"0px"});Da.css({display:"none",left:M+"px"});Cb.removeClass("hap-contr-btn-hover")};n.setRange=function(a,c){var b=n.getDuration();if("undefined"===typeof b)return!1;
0>a&&(a=0);c>b&&(c=b);ma=a;Sa=c;la=!1;wa.css("left",ma/b*M+"px");Da.css("left",Sa/b*M+"px");za||n.toggleRange()};n.getRange=function(){return"undefined"!==typeof ma&&"undefined"!==typeof Sa?[ma,Sa]:null};if(wa.length){var eb=!0;var Yb=new HAPRangeSlider({settings:a,range_handle_a:wa,range_handle_b:Da});c(Yb).on("HAPRangeSlider.RANGE_CHANGE",function(a,c){var b=c.point.pageX-Gb.offset().left,d=c.elem;0>b?b=0:b>M&&(b=M);d.hasClass("hap-range-handle-a")?(b>parseInt(Da.css("left"),10)-he&&(b=parseInt(Da.css("left"),
10)-cd),Bc=b,ma=Z(Bc)):(b<parseInt(wa.css("left"),10)+cd&&(b=parseInt(wa.css("left"),10)+cd),Cc=b,Sa=Z(Cc));d.css("left",b+"px");c.event?S(c.event):t.hide()})}var dd=k.find(".hap-playback-rate-seekbar");if(dd.length){var fb=new HAPPlaybackRateSlider({settings:a,wrapper:k,seekbar:dd,sliderBg:k.find(".hap-playback-rate-bg"),sliderLevel:k.find(".hap-playback-rate-level"),isVertical:dd.hasClass("hap-vertical"),tooltip:t});c(fb).on("HAPPlaybackRateSlider.RANGE_CHANGE",function(a,c){n.setPlaybackRate(c.value,
!0)})}if(a.disableRightClickOverPlayer)k.on("contextmenu",function(){return!1});if(a.useKeyboardNavigationForPlayback)Ma.off("keyup.hap").on("keyup.hap",function(a){if(!u)return!1;var b=a.keyCode,e=c(a.target);if(37==b)n.previousMedia();else if(39==b)n.nextMedia();else if(32==b){if(e.hasClass("hap-search-filter"))return!1;n.togglePlayback();a.preventDefault()}else if(77==b){if(e.hasClass("hap-search-filter"))return!1;T()}});var Kd=[k.find(".hap-next-toggle"),k.find(".hap-prev-toggle"),k.find(".hap-skip-forward"),
k.find(".hap-skip-backward"),k.find(".hap-playlist-toggle"),k.find(".hap-playlist-close"),cc,k.find(".hap-share-close"),k.find(".hap-share-item"),k.find(".hap-playback-rate-close"),bc,Cb,ee,Na,va,jb,Fa,ob];Zc=Kd.length;for(ya=0;ya<Zc;ya++)c(Kd[ya]).css("cursor","pointer").on("click",Eb);window.onbeforeunload=function(b){a.useStatistics&&ua&&tb("hap_play_count",ua)};ac.on("resize",function(){if(!u)return!1;bd&&clearTimeout(bd);bd=setTimeout(Sc,150)});a.useStatistics&&(k.on("click",".hap-like-count",
function(a){if(!u||!h)return!1;a=c(this).closest(".hap-playlist-item");tb("hap_like_count",a.attr("data-id"))}),k.on("click",".hap-download-count:not(.hap-no-download)",function(a){if(!u||!h)return!1;a=c(this).closest(".hap-playlist-item");tb("hap_download_count",a.attr("data-id"))}));this.playMedia=function(){if(!u||!h||Ra)return!1;if("youtube"==h)y&&aa&&y.playVideo();else if(p){"shoutcast"!=h&&"icecast"!=h&&"radiojar"!=h||p.load();var a=p.play();void 0!==a&&a.then(function(){})["catch"](function(a){})}};
this.pauseMedia=function(){if(!u||!h||!Ra)return!1;"youtube"==h?y&&aa&&y.pauseVideo():p&&p.pause()};this.checkMedia=function(a){if(!u||!h)return!1;a=a.toLowerCase();Ra&&"pause"==a&&("youtube"==h?y&&aa&&y.pauseVideo():p&&p.pause())};this.togglePlayback=function(){if(!u||!h)return!1;z&&z.clearAdMidTimeout();if(z&&z.isAdMidOn())z.toggleAdMidAudio();else if("youtube"==h){if(y&&aa){var a=y.getPlayerState();1==a?y.pauseVideo():2==a?y.playVideo():(-1==a||5==a||0==a)&&y.playVideo()}}else p&&(p.paused?("shoutcast"!=
h&&"icecast"!=h&&"radiojar"!=h||p.load(),a=p.play(),void 0!==a&&a.then(function(){z&&z.isAdPreOn()&&(va.find(".hap-btn-play").hide(),va.find(".hap-btn-pause").show())})["catch"](function(a){})):(p.pause(),z&&z.isAdPreOn()&&(va.find(".hap-btn-play").show(),va.find(".hap-btn-pause").hide())))};this.nextMedia=function(){if(!u)return!1;0!=v&&(Jb(),E.advanceHandler(1,!0))};this.previousMedia=function(){if(!u)return!1;0!=v&&(Jb(),E.advanceHandler(-1,!0))};this.loadMedia=function(a,c,e,f){if(!u||Q)return!1;
if(0!=v){var b=-1;if("title"==a){for(a=0;a<v;a++)if(c==G[a].data.title){b=a;var d=!0;break}if(!d)return alert('No media with title "'+c+'" to load! LoadMedia failed.'),!1}else if("counter"==a){if(0>c||c>v-1)return alert('Invalid track number. Track number  "'+c+'" doesnt exist. LoadMedia failed.'),!1;b=c}else if("id"==a){var g=w.find(".hap-playlist-item[data-media-id="+c+"]");if(0==g.length)return alert("No media with media ID "+c+" to load! LoadMedia failed."),!1;b=g.attr("data-id")}else if("id-title"==
a){e&&f?g=w.find('.hap-playlist-item[data-media-id="'+c+'"][title="'+e+'"][data-artist="'+f+'"]'):e?g=w.find('.hap-playlist-item[data-media-id="'+c+'"][title="'+e+'"]'):f&&(g=w.find('.hap-playlist-item[data-media-id="'+c+'"][data-artist="'+f+'"]'));if(0==g.length)return alert("No media with media ID "+c+" to load! LoadMedia failed."),!1;b=g.attr("data-id")}else return console.log("loadMedia function requires format parameter!"),!1;Jb();E.processPlaylistRequest(b)}};this.loadMore=function(){if(!u||
!ca||!L||Q)return!1;Q=!0;ra.show();ta=!0;H=[];"soundcloud"==ca?td():"podcast"==ca?sd():"folder"==ca?rd():"youtube"==ca&&(Za||Lc("youtube"),Za.resumeLoad(L))};this.setLoadMore=function(a){ia=a};this.endLoadMore=function(){Q=!1;playerLoader.hide();ta=!1};this.addMore=function(){if(!u||Q)return!1;ab&&(ta||Pc())};this.setAddMore=function(a){ab=a};this.loadPlaylist=function(b,c){if(!u||Q)return!1;if("string"===typeof b){a.mediaId=c;if(a.activePlaylist==b)return!1;ed(b)}else return alert("Invalid value loadPlaylist!"),
!1};this.addTrack=function(a,c,e){if(!u||Q)return!1;if("undefined"===typeof a)return alert("addTrack method requires track parameter. AddTrack failed."),!1;rb=!1;"undefined"!==typeof c&&(rb=c,0==c&&(sb=!0),console.log("addTrack, isEnqueue",sb));vc.hide();ja=e;qb=!1;$a=!0;if(Wa)if("undefined"!==typeof ja){if(0>ja||ja>v)return alert('Invalid position to insert track to. Position number "'+e+'" doesnt exist. AddTrack failed.'),!1;ja==v&&(qb=!0)}else qb=!0,ja=v;else{if("undefined"!==typeof ja){if(0!=
ja)return alert('Invalid position to insert track to. Position number "'+e+'" doesnt exist. AddTrack failed.'),!1}else ja=0;qb=!0}Q=!0;ra.show();Xa=-1;H=[];N=[];Array.isArray(a)?N=a:N.push(a);v=N.length;Ya=!1;Wa||(Ya=!0);Wa=w;K()};this.inputAudio=function(a){if(!u||Q)return!1;if("undefined"===typeof a)return alert("inputAudio method requires data parameter. inputAudio failed."),!1;V&&La();0<v&&E.reSetCounter();e=a;h=a.type;if(-1==Id.indexOf(h))return alert("inputAudio method supports tracks that dont require processing: "+
Id),!1;"shoutcast"!=h&&"icecast"!=h&&"radiojar"!=h&&(rc(),ad&&C());ba=!0;Ub()};this.removeTrack=function(a,c){if(!u||Q)return!1;if(0!=v){if("title"==a){var b;for(b=0;b<v;b++)if(c==G[b].data.title){var d=w.children(".hap-playlist-item").eq(b);var e=!0;break}if(!e)return alert('Track with title "'+c+'" doesnt exist. RemoveTrack failed.'),!1}else if("counter"==a){c=parseInt(c,10);if(0>c||c>v-1)return alert('Track number  "'+c+'" doesnt exist. RemoveTrack failed.'),!1;d=w.find(".hap-playlist-item").eq(c)}else if("id"==
a){if(d=w.find(".hap-playlist-item[data-media-id="+c+"]"),0==d.length)return alert('Track with media id "'+c+'" doesnt exist. RemoveTrack failed.'),!1}else return alert("removeTrack method failed."),!1;d.remove();G.splice(parseInt(d.attr("data-id"),10),1);Rb(!0);0<v?(d=E.getCounter(),c==d?(Ab(),E.setPlaylistItems(v)):(E.setPlaylistItems(v,!1),c<d&&E.reSetCounter(E.getCounter()-1))):dc()}};this.sort=function(a){if(!u||3>v)return!1;if("undefined"===typeof a)return console.log("Sort method requires order parameter. Sort method failed."),
!1;if(qa==e)return!1;var b=w.children(".hap-playlist-item"),e=a.toLowerCase();if("title-asc"==e){HAPUtils.keysrt2(G,"data","title");var f;a=[];for(f=0;f<v;f++)a.push(G[f].id);Na.find(".hap-btn-sort-alpha-up").hide();Na.find(".hap-btn-sort-alpha-down").show()}else if("title-desc"==e){HAPUtils.keysrt2(G,"data","title",!0);a=[];for(f=0;f<v;f++)a.push(G[f].id);Na.find(".hap-btn-sort-alpha-up").show();Na.find(".hap-btn-sort-alpha-down").hide()}else if("random"==e)a=HAPUtils.randomiseArray(v),G=HAPUtils.sortArray(G,
a);else{console.log("Unknown sort order. Sort method failed.");return}qa=e;e=ua;w.append(c.map(a,function(a){return b[a]}));-1!=e&&(e=w.children(".hap-playlist-item[data-id='"+e+"']").index(),E.reSetCounter(e));Rb(!0)};this.destroyInstance=function(){dc();Ab();a.usePlaylistScroll&&(Oa.mCustomScrollbar("destroy"),Sb=!1)};this.destroyInstance2=function(){Ab();a.usePlaylistScroll&&(Oa.mCustomScrollbar("destroy"),Sb=!1)};this.destroyMedia=function(){if(!u)return!1;u&&h&&(V&&La(),Ab(),E.reSetCounter())};
this.destroyPlaylist=function(){if(!u)return!1;dc()};this.setPlaybackRate=function(a,c){if(!u||!h)return!1;e.playbackRate=a;vb&&(vb=a);"youtube"==h?y.setPlaybackRate(a):p&&(p.playbackRate=a);c||fb&&fb.setVisual(a)};this.toggleRandom=function(b){if(!u||"undefined"===typeof E)return!1;a.randomPlay="undefined"!==typeof b?b:!a.randomPlay;E.setRandom(a.randomPlay);Fa.find(".hap-btn").hide();a.randomPlay?Fa.find(".hap-btn-random-on").show():Fa.find(".hap-btn-random-off").show()};this.setLoop=function(b){if(!u||
"undefined"===typeof E)return!1;jb.find(".hap-btn").hide();a.loopState=b;kb=Ob.indexOf(a.loopState);jb.find(".hap-btn-loop-"+a.loopState).show();E.setLooping(a.loopState)};this.getVolume=function(){return J};this.setVolume=function(a){if(!u)return!1;0>a?a=0:1<a&&(a=1);O(a)};this.toggleMute=function(){if(!u)return!1;T()};this.disableSeek=function(a){Jd=a};this.seek=function(a){if(!u||!h)return!1;if("youtube"==h)y&&aa&&y.seekTo(a);else if("audio"==h&&p)try{p.currentTime=a}catch(d){console.log(d)}};
this.seekBackward=function(a){if(!u||!h)return!1;if("youtube"==h)y&&aa&&(a=Math.max(y.getCurrentTime()-(a||seekTime),0),y.seekTo(a));else if("audio"==h&&p)try{p.currentTime=Math.max(p.currentTime-(a||seekTime),0)}catch(d){console.log(d)}};this.seekForward=function(a){if(!u||!h)return!1;if("youtube"==h)y&&aa&&(a=Math.min(y.getCurrentTime()+(a||seekTime),y.getDuration()),y.seekTo(a));else if("audio"==h&&p)try{p.currentTime=Math.min(p.currentTime+(a||seekTime),p.duration)}catch(d){console.log(d)}};this.getCurrentMediaUrl=
function(){if(!u)return!1;if(!h)return"";var a=-1==window.location.href.indexOf("?")?"?":"&";var c=void 0!=e.mediaId?"hap-media-id="+e.mediaId:"hap-active-item="+ua,f=Hb?"&hap-resume-time="+Math.floor(n.getCurrentTime()):"";if(void 0!=e.mediaId&&-1==ge.indexOf(e.origtype)&&e.safeTitle){var g="&hap-media-title="+encodeURIComponent(e.safeTitle);return a+c+f+g}return a+c+f};this.getCurrentTime=function(){if("youtube"==h)return y&&aa?y.getCurrentTime():0;if("audio"==h){if(p)return p.currentTime}else return 0};
this.getDuration=function(){if(!u||!h)return!1;if("youtube"==h){if(y&&aa)return y.getDuration()}else if("audio"==h&&p)return p.duration};this.destroyPlaylistScroll=function(){if(!u)return!1;a.usePlaylistScroll&&(Oa.mCustomScrollbar("destroy"),Sb=!1)};this.getSetupDone=function(){return u};this.getMediaPlaying=function(){return u?Ra:!1};this.getPlaylistLoading=function(){return Q};this.getCounter=function(){return u?"undefined"!==typeof E?E.getCounter():-1:null};this.getPlaylistContent=function(){return w};
this.getPlaylistData=function(){return G};this.getPlaylistLength=function(){return u?HAPUtils.isNumber(v)?v:0:!1};this.getPlaylistList=function(){return Jc};this.getSettings=function(){return a};this.getCurrMediaData=function(){return u?e:!1};this.getWrapper=function(){return k};this.getPlaylistItems=function(){if(!u)return!1;var a=[];w.find(".hap-playlist-item").each(function(){a.push(c(this))});return a};this.openPopup=function(){if(!u||a.isPopup)return!1;hapOpenPopup(a,n)};this.togglePlaylist=
function(){if(-1<P.indexOf("hap-art-narrow-light")||-1<P.indexOf("hap-art-narrow-dark"))a.playlistOpened?(yc.stop().animate({left:"0px"},{duration:350}),xa.stop().animate({left:-yc.width()+"px"},{duration:350})):(yc.stop().animate({left:yc.width()+"px"},{duration:350}),xa.stop().animate({left:"0px"},{duration:350}));else if(-1<P.indexOf("hap-art-wide-light")||-1<P.indexOf("hap-art-wide-dark")||-1<P.indexOf("hap-brona-light")||-1<P.indexOf("hap-brona-dark"))if(a.playlistOpened)xa.stop().animate({height:"0px"},
{duration:350});else{var b=xa.css("height","auto").height();xa.height(0).stop().animate({height:b+"px"},{duration:350,complete:function(){c(this).height("auto")}})}else-1<P.indexOf("hap-wall")?a.playlistOpened?xa.css("left","-20000px"):xa.css("left",0):-1<P.indexOf("hap-classic")?a.playlistOpened?xa.slideUp():xa.slideDown():-1<P.indexOf("hap-fixed")&&(a.playlistOpened?k.stop().animate({bottom:-xa.height()+"px"},{duration:350}):k.stop().animate({bottom:"0px"},{duration:350}));a.playlistOpened=!a.playlistOpened};
if(Hd&&a.continousKey)if(!wc)localStorage.removeItem(a.continousKey);else if(localStorage.getItem(a.continousKey)){var Db=JSON.parse(localStorage.getItem(a.continousKey));a.activePlaylist=Db.activePlaylist;a.resumeTime=Db.resumeTime;a.volume=Db.volume;a.activeItem=Db.activeItem;ba=a.autoPlay=Db.autoPlay;a.lastPositionArr=Db.lastPositionArr;localStorage.removeItem(a.continousKey)}if(a.isPopup&&a.copyCurrentPlaylistToPopup){G=a.playlistDataArr;v=G.length;E.setPlaylistItems(v,!1);if(a.useStatistics){if(!a.usePlaylist)for(ya=
0;ya<v;ya++)G[ya].data.hapStatsSet=!1;ic()}var Wa=w;a.usePlaylist&&a.addPlaylistEvents&&w.find(".hap-playlist-item").each(function(){Xb=c(this).find(".hap-playlist-item-content").on("click",ea);if(!lb)Xb.on("mouseenter",Ea).on("mouseleave",Ka)});jc()}else if(Yc.length){var Q=!0;ra.show();c(n).trigger("playlistStartLoad",{instance:n,instanceName:a.instanceName});N=Yc;v=N.length;K()}else a.activePlaylist&&!HAPUtils.isEmpty(a.activePlaylist)?ed(a.activePlaylist):jc();return this}})(jQuery);
var hap_popup_window,hap_player_instance,hap_player_auto_instance,hasLocalStorage=HAPUtils.hasLocalStorage();
function hapOpenPopup(c,a){if(!hasLocalStorage||!localStorage.getItem("hap_popup")){hap_player_instance=a;var f=c.popupUrl||c.sourcePath+"popup.html?rand="+99999999*Math.random(),R=c.popupWidth||hap_player_instance.width(),q=c.popupHeight||hap_player_instance.height(),B=(window.screen.width-parseInt(R,10))/2,C=(window.screen.height-parseInt(q,10))/2;if(!hap_popup_window||hap_popup_window.closed)if(hap_popup_window=window.open(f,"audio_player","menubar=no,toolbar=no,location=no,scrollbars=1,resizable,width="+
R+",height="+q+",left="+B+",top="+C),!hap_popup_window)return alert("Player can not be opened in a popup window because your browser is blocking Pop-Ups. You need to allow Pop-Ups in browser for this site to use the Player."),!1}}
function hapNotifyParent(){if(hap_popup_window&&void 0!=hap_popup_window.initPopup){if(hap_player_instance){var c=hap_player_instance.getSettings();c.volume=hap_player_instance.getVolume();c.activePlaylist=c.activePlaylist;c.activeItem=hap_player_instance.getCounter();c.resumeTime=hap_player_instance.getCurrentTime();c.autoPlay=hap_player_instance.getMediaPlaying();c.copyCurrentPlaylistToPopup?(c.playlistDataArr=hap_player_instance.getPlaylistData(),hap_player_instance.destroyInstance2()):hap_player_instance.destroyInstance();
var a=hap_player_instance.getWrapper()}else hap_player_auto_instance&&(c=hap_player_auto_instance.settings,c.copyCurrentPlaylistToPopup=!1,a=hap_player_auto_instance.wrapper);var f=a.attr("id"),R=hapjq("#hap-inline-css").clone().wrap("<p>").parent().html(),q=hapjq("#hap-playlist-list").remove().wrap("<p>").parent().html();a=a.remove().wrap("<p>").parent().html();try{window[c.instanceName]=hap_popup_window.initPopup(a,f,c,R,q)}catch(B){return alert("initPopup error: "+B.message),!1}}};